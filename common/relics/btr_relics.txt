@activation_cost = 150
@triumph_duration = 3600
@triumph_duration_short = 1800
@triumph_duration_veryshort = 900

r_asari_writings = {
	activation_duration = @triumph_duration
	portrait = GFX_relic_asari_writings
	sound = relic_activation_generic

	resources = {
		category = relics
		# Activation cost
		cost = {
			influence = @activation_cost
		}
		produces = {
			unity = 25
		}
	}

	ai_weight = {
		weight = 100
	}

	triggered_country_modifier = {
		potential = {
			always = yes
		}
		species_leader_exp_gain = 0.20
	}
	score = 2000
	active_effect = {
		custom_tooltip = relic_asari_writings_activate
		custom_tooltip = relic_triumph_cooldown
		hidden_effect = {
			add_modifier = {
				modifier = "relic_activation_cooldown"
				days = @triumph_duration
			}
			random_list = {
				33 = {
					random_owned_leader = {
						save_event_target_as = leader_1
						random_list = {
							33 = { add_skill = 1 }
							33 = { add_skill = 2 }
							33 = { add_skill = 3 }
						}
					}
					country_event = { id = btr_relic.1 }
				}
				33 = {
					random_owned_leader = {
						limit = {
							NOT = { has_leader_flag = leader_level_up }
						}
						save_event_target_as = leader_1
						random_list = {
							33 = { add_skill = 1 }
							33 = { add_skill = 2 }
							33 = { add_skill = 3 }
						}
						set_timed_leader_flag = {
							flag = leader_level_up
							days = 20
						}
					}
					random_owned_leader = {
						limit = {
							NOT = { has_leader_flag = leader_level_up }
						}
						save_event_target_as = leader_2
						random_list = {
							33 = { add_skill = 1 }
							33 = { add_skill = 2 }
							33 = { add_skill = 3 }
						}
						set_timed_leader_flag = {
							flag = leader_level_up
							days = 20
						}
					}
					country_event = { id = btr_relic.2 }
				}
				33 = {
					random_owned_leader = {
						limit = {
							NOT = { has_leader_flag = leader_level_up }
						}
						save_event_target_as = leader_1
						random_list = {
							33 = { add_skill = 1 }
							33 = { add_skill = 2 }
							33 = { add_skill = 3 }
						}
						set_timed_leader_flag = {
							flag = leader_level_up
							days = 20
						}
					}
					random_owned_leader = {
						limit = {
							NOT = { has_leader_flag = leader_level_up }
						}
						save_event_target_as = leader_2
						random_list = {
							33 = { add_skill = 1 }
							33 = { add_skill = 2 }
							33 = { add_skill = 3 }
						}
						set_timed_leader_flag = {
							flag = leader_level_up
							days = 20
						}
					}
					random_owned_leader = {
						limit = {
							NOT = { has_leader_flag = leader_level_up }
						}
						save_event_target_as = leader_3
						random_list = {
							33 = { add_skill = 1 }
							33 = { add_skill = 2 }
							33 = { add_skill = 3 }
						}
						set_timed_leader_flag = {
							flag = leader_level_up
							days = 20
						}
					}
					country_event = { id = btr_relic.3 }
				}
			}
		}
	}
	# Possible check for activation
	possible = {
		custom_tooltip = {
			fail_text = "requires_relic_no_cooldown"
			NOT = { has_modifier = relic_activation_cooldown }
		}
	}
}

r_prothean_sphere = {
	activation_duration = @triumph_duration
	portrait = "GFX_relic_prothean_sphere"
	sound = event_prothean_sphere

	resources = {
		category = relics
		# Activation cost
		cost = {
			energy = 5000
			btr_biotics = 100
		}
		produces = {
			btr_biotics = 1
			energy = 20
		}
	}

	ai_weight = {
		weight = 0
		modifier = {
			weight = 100
			has_crisis = yes
		}
	}

	triggered_country_modifier = {
		potential = {
			always = yes
		}
		custom_tooltip = relic_prothean_sphere_passive_tooltip
		damage_vs_country_type_swarm_mult = 0.50
		damage_vs_country_type_extradimensional_mult = 0.50
		damage_vs_country_type_extradimensional_2_mult = 0.50
		damage_vs_country_type_extradimensional_3_mult = 0.50
		damage_vs_country_type_cybrex_empire_mult = 0.50
	}
	score = 5000
	active_effect = {
		custom_tooltip = relic_prothean_sphere_activate # destroys a random crisis or reaper ship
		custom_tooltip = relic_triumph_cooldown
		hidden_effect = {
			add_modifier = {
				modifier = "relic_activation_cooldown"
				days = @triumph_duration
			}
			random_country = {
				limit = {
					OR = {
						is_country_type = swarm
						is_country_type = extradimensional
						is_country_type = extradimensional_2
						is_country_type = extradimensional_3
						is_country_type = cybrex_empire
						is_country_type = reapers
					}
				}
				save_event_target_as = current_crisis
			}
			event_target:current_crisis = {
				random_owned_ship = {
					limit = {
						NOT = { is_ship_size = reaper_harbinger }
					}
					weights = {
						base = 1
						modifier = { add = 1000 is_ship_size = reaper_sovereign }
					}
					save_event_target_as = destroyed_crisis_ship
					create_ambient_object = {
						type = explosion_particle_object
						location = this
						duration = 10
						use_3d_location = yes			
						entity_offset = { min = 0 max = 0 }
						entity_offset_angle = { min = 0 max = 0 }
						entity_offset_height = { min = 0 max = 0 }			
						entity_scale_to_size = yes
						scale = 10
					}
					destroy_ship = this
				}
			}
			country_event = { id = btr_relic.4 }
		}
	}
	# Possible check for activation
	possible = {
		custom_tooltip = {
			fail_text = "requires_relic_no_cooldown"
			NOT = { has_modifier = relic_activation_cooldown }
		}
		custom_tooltip = {
			fail_text = requires_ongoing_crisis
			has_global_flag = galactic_crisis_happened
		}
	}
}