##########################################################################
# Decisions
##########################################################################

decision_deep_exploration = {
	owned_planets_only = yes
	sound = event_scanner
	icon = decision_deep_exploration
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		NOT = { has_planet_flag = exploration_executed }
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		custom_tooltip = decision_deep_exploration_effect_desc
		hidden_effect = {
			set_planet_flag = exploration_executed
			random_list = {
				50 = {
					#Null
					planet_event =  { id = planetarystations_decision_event.1 days = 1 }
				}
				15 = {
					#Minerals
					random_list = {
						#Minerals 1
						70 = {
							planet_event =  { id = planetarystations_decision_event.2 days = 1 }
						}
						#Minerals 2
						25 = {
							planet_event =  { id = planetarystations_decision_event.3 days = 1 }
						}
						#Minerals 3
						5 = {
							planet_event =  { id = planetarystations_decision_event.4 days = 1 }
						}
					}
				}
				15 = {
					#Regolith
					random_list = {
						#Regolith 1
						70 = {
							planet_event =  { id = planetarystations_decision_event.5 days = 1 }
						}
						#Regolith 2
						25 = {
							planet_event =  { id = planetarystations_decision_event.6 days = 1 }
						}
						#Regolith 3
						5 = {
							planet_event =  { id = planetarystations_decision_event.7 days = 1 }
						}
					}
				}
				8 = {
					#Trade Value
					planet_event =  { id = planetarystations_decision_event.8 days = 1 }
				}
				3 = {
					#Motes
					planet_event =  { id = planetarystations_decision_event.9 days = 1 }
				}
				3 = {
					#Crystals
					planet_event =  { id = planetarystations_decision_event.10 days = 1 }
				}
				3 = {
					#Gas
					planet_event =  { id = planetarystations_decision_event.11 days = 1 }
				}
				1 = {
					#Zro
					planet_event =  { id = planetarystations_decision_event.12 days = 1 }
				}
				1 = {
					#Dark Matter
					planet_event =  { id = planetarystations_decision_event.13 days = 1 }
				}
				1 = {
					#Living Metal
					planet_event =  { id = planetarystations_decision_event.14 days = 1 }
				}
				
			}
		}
	}
	
	ai_weight = {
		weight = 100
	}
}

decision_energy_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_energy_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		custom_tooltip = district_reactor_block_add
		hidden_effect = {
			if = {
				limit = { has_deposit = d_geothermal_springs }
				custom_tooltip = district_geothermal_power_plant_add
			}
			if = {
				limit = { has_deposit = d_hydrocarbon_deposits }
				custom_tooltip = district_hydrocarbon_power_plant_add
			}
		
			set_planet_flag = energy_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
		modifier = {
			factor = 0
			owner = {
				has_deficit = helium
				resource_stockpile_compare = { #can buy on market
					resource = energy
					value < 1500
				}
			}
		}
	}
}

decision_mining_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_mining_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
		OR = {
			has_deposit = d_mineral_lodes
			has_deposit = d_rich_regolith_formations
			has_deposit = d_dust_cavities
			has_deposit = d_exotic_gases_vent
			has_deposit = d_crystal_cavities
			has_deposit = d_zro_source
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		custom_tooltip = district_mining_complex_add
		hidden_effect = {
			if = {
				limit = { has_deposit = d_rich_regolith_formations }
				custom_tooltip = district_helium_extractor_add
			}
			if = {
				limit = { 
					owner = { has_technology = tech_mine_volatile_motes }
					has_deposit = d_dust_cavities
				}
				custom_tooltip = district_mote_mine_add
			}
			if = {
				limit = { 
					owner = { has_technology = tech_mine_exotic_gases }
					has_deposit = d_exotic_gases_vent
				}
				custom_tooltip = district_gas_refinery_add
			}
			if = {
				limit = { 
					owner = { has_technology = tech_mine_rare_crystals }
					has_deposit = d_crystal_cavities
				}
				custom_tooltip = district_crystal_mining_add
			}
			if = {
				limit = { 
					owner = { has_technology = tech_mine_zro }
					has_deposit = d_zro_source
				}
				custom_tooltip = district_zro_harvesting_add
			}
			set_planet_flag = mining_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 50
		modifier = {
			factor = 2
			OR = {
				has_deposit = d_rich_regolith_formations
				has_deposit = d_dust_cavities
				has_deposit = d_exotic_gases_vent
				has_deposit = d_crystal_cavities
				has_deposit = d_zro_source
			}
		}
	}
}

decision_research_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_research_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		custom_tooltip = district_experimental_complex_add
		custom_tooltip = district_biolaboratory_add
		custom_tooltip = district_testing_site_add
		hidden_effect = {
			if = {
				limit = { 
					owner = { has_technology = tech_mine_dark_matter }
					has_deposit = d_dark_matter_formation
				}
				custom_tooltip = district_dark_matter_extractor_add
			}
			set_planet_flag = research_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
		modifier = {
			factor = 4
			has_deposit = d_dark_matter_formation
		}
	}
}

decision_civil_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_civil_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		exists = owner
		owner = { is_gestalt = no }
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		custom_tooltip = district_bureaucratic_center_add
		hidden_effect = {
			if = {
				limit = {
					exists = owner
					owner = {
						is_megacorp = yes
						is_spiritualist = no
					}
				}
				custom_tooltip = district_corporate_complex_add
			}
		}
		custom_tooltip = district_commercial_wards_add
		hidden_effect = {
			if = {
				limit = {
					exists = owner
					owner = {
						has_origin = origin_necrophage
						has_trait = trait_necrophage
						NOT = { has_valid_civic = civic_fanatic_purifiers }
					}
				}
				custom_tooltip = district_elevation_center_add
			}
			if = {
				limit = {
					NOR = {
						is_planet_class = pc_asteroid_station
						is_planet_class = pc_ice_asteroid_station
						is_planet_class = pc_crystal_asteroid_station
					}
				}
				custom_tooltip = district_storage_yards_add
			}
			else = {
				custom_tooltip = district_docking_bay_add
			}
			set_planet_flag = civil_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
	}
}

decision_transit_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_transit_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		exists = owner
		owner = { is_gestalt = yes }
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					owner = { is_machine_empire = yes }
				}
				custom_tooltip = district_outer_limits_router_add
			}
			if = {
				limit = {
					NOR = {
						is_planet_class = pc_asteroid_station
						is_planet_class = pc_ice_asteroid_station
						is_planet_class = pc_crystal_asteroid_station
					}
				}
				custom_tooltip = district_storage_yards_add
			}
			else = {
				custom_tooltip = district_docking_bay_add
			}
			set_planet_flag = civil_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
	}
}

decision_industrial_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_industrial_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		custom_tooltip = district_foundry_plant_add
		hidden_effect = {
			if = {
				limit = { 
					owner = {
						country_uses_consumer_goods = yes
					}
				}
				custom_tooltip = district_manufacturing_complex_add
			}
			if = {
				limit = { 
					owner = {
						OR = {
							AND = {
								is_regular_empire = yes
								NOT = { has_policy_flag = robots_outlawed }
								has_technology = tech_robotic_workers
							}
							is_machine_empire = yes
						}
					}
				}
				custom_tooltip = district_assembly_factory_add
			}
			if = {
				limit = { 
					owner = { has_technology = tech_mine_living_metal }
					has_deposit = d_living_metal_deposit
				}
				custom_tooltip = district_living_metal_processing_add
			}
			set_planet_flag = industrial_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
		modifier = {
			factor = 4
			has_deposit = d_living_metal_deposit
		}
	}
}

decision_military_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_derelict_interior
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		custom_tooltip = district_barracks_add
		custom_tooltip = district_fortified_bunkers_add
		hidden_effect = {
			set_planet_flag = military_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 10
		modifier = {
			factor = 2
			solar_system = {
				any_neighbor_system = {
					exists = owner
					is_same_value = owner.capital_scope.solar_system
				}
			}
		}
		modifier = {
			factor = 4
			solar_system = {
				any_system_planet = {
					NOT = { is_same_value = root }
					is_colony = no
				}
			}
		}
		modifier = {
			factor = 8
			solar_system = {
				any_neighbor_system = {
					exists = owner
					owner = { NOT = { is_same_value = root.owner } }
				}
			}
		}
		modifier = {
			factor = 0
			solar_system = {
				any_system_planet = {
					has_planet_flag = military_station
				}
			}
		}
	}
}

decision_resort_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_resort_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		exists = owner
		owner = { 
			is_gestalt = no 
			is_spiritualist = no
		}
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					exists = owner
					owner = {
						NOR = {
							has_valid_civic = civic_warrior_culture
							has_valid_civic = civic_slaver_guilds
						}
					}
				}
				custom_tooltip = district_leisure_sector_add
			}
			else = {
				custom_tooltip = district_battle_arena_add
			}
			custom_tooltip = district_casino_level_add
			custom_tooltip = district_race_track_add
			
			set_planet_flag = cultural_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
		modifier = {
			factor = 0
			solar_system = {
				any_system_planet = {
					has_planet_flag = cultural_station
				}
			}
		}
	}
}

decision_temple_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_temple_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		exists = owner
		owner = { 
			is_spiritualist = yes
		}
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					exists = owner
					owner = {
						NOR = {
							has_valid_civic = civic_death_cult
							has_valid_civic = civic_death_cult_corporate
						}
					}
				}
				custom_tooltip = district_temple_complex_add
			}
			else = {
				custom_tooltip = district_grim_complex_add
			}
			
			set_planet_flag = cultural_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
		modifier = {
			factor = 0
			solar_system = {
				any_system_planet = {
					has_planet_flag = cultural_station
				}
			}
		}
	}
}

decision_unity_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_unity_symbol
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		exists = owner
		owner = { 
			is_gestalt = yes
		}
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					exists = owner
					owner = { is_hive_empire = yes }
				}
				custom_tooltip = district_synaptic_node_add
			}
			if = {
				limit = {
					exists = owner
					owner = { is_machine_empire = yes }
				}
				custom_tooltip = district_simulation_complex_add
			}
			if = {
				limit = {
					exists = owner
					owner = {
						is_machine_empire = yes
						has_valid_civic = civic_machine_servitor
					}
				}
				custom_tooltip = district_sanctuary_complex_add
			}
			
			set_planet_flag = cultural_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
		modifier = {
			factor = 0
			solar_system = {
				any_system_planet = {
					has_planet_flag = cultural_station
				}
			}
		}
	}
}

decision_prison_station = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_prison_station
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		exists = owner
		owner = { 
			is_gestalt = no
		}
		NOR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
			has_planet_flag = cracking_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		hidden_effect = {
			custom_tooltip = decision_prison_station_effect_desc
			if = {
				limit = { owner = { is_authoritarian = yes } }
				custom_tooltip = add_political_persecution
			}
			if = {
				limit = { owner = { is_spiritualist = yes } }
				custom_tooltip = add_hunting_heretics
			}
			custom_tooltip = add_detention_operation
			set_planet_flag = prison_station
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 20
		modifier = {
			factor = 0
			solar_system = {
				OR = {
					any_system_planet = {
						has_planet_flag = prison_station
					}
					any_neighbor_system = {
						any_system_planet = {
							has_planet_flag = prison_station
						}
					}
				}
			}
		}
	}
}

decision_station_restructuring = {
	owned_planets_only = yes
	sound = event_construction
	icon = default
	
	enactment_time = 300
	resources = {
		category = decisions
		cost = {
			energy = 500
			unity = 500
		}
	}
	
	potential = {
		has_planet_flag = planetary_station
		OR = {
			has_planet_flag = energy_station
			has_planet_flag = mining_station
			has_planet_flag = research_station
			has_planet_flag = civil_station
			has_planet_flag = industrial_station
			has_planet_flag = military_station
			has_planet_flag = cultural_station
			has_planet_flag = prison_station
		}
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		hidden_effect = {
			custom_tooltip = decision_station_restructuring_effect_desc
			if = {
				limit = { has_planet_flag = energy_station }
				remove_planet_flag = energy_station
			}
			if = {
				limit = { has_planet_flag = mining_station }
				remove_planet_flag = mining_station
			}
			if = {
				limit = { has_planet_flag = research_station }
				remove_planet_flag = research_station
			}
			if = {
				limit = { has_planet_flag = civil_station }
				remove_planet_flag = civil_station
			}
			if = {
				limit = { has_planet_flag = industrial_station }
				remove_planet_flag = industrial_station
			}
			if = {
				limit = { has_planet_flag = military_station }
				remove_planet_flag = military_station
			}
			if = {
				limit = { has_planet_flag = cultural_station }
				remove_planet_flag = cultural_station
			}
			if = {
				limit = { has_planet_flag = prison_station }
				remove_planet_flag = prison_station
			}
			
			validate_planet_buildings_and_districts = yes
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_launch_political_persecution = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_political_persecution

	resources = {
		category = decisions
		cost = {
			unity = 500
		}
	}

	potential = {
		owner = { 
			is_authoritarian = yes 
			any_owned_planet = { has_planet_flag = prison_station }
		}
		NOR = {
			has_planet_flag = prison_station
			has_modifier = penal_colony
			has_modifier = political_persecution
		}
	}

	effect = {
		add_modifier = { modifier = "political_persecution" days = -1 }
	}

	ai_weight = {
		weight = 1
	}
}

decision_end_political_persecution = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_political_persecution

	resources = {
		category = decisions
	}

	potential = {
		has_modifier = political_persecution
	}

	effect = {
		remove_modifier = political_persecution
	}

	ai_weight = {
		weight = 5
		modifier = {
			weight = 1000
			any_owned_pop = { NOT = { has_ethic = ethic_egalitarian } }
		}
		modifier = {
			factor = 0
			owner = {
				any_owned_planet = { 
					has_planet_flag = prison_station
					num_pops < 5
				}
			}
		}
	}
}

decision_launch_hunting_heretics = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_alien_propaganda

	resources = {
		category = decisions
		cost = {
			unity = 500
		}
	}

	potential = {
		owner = { 
			is_spiritualist = yes
			any_owned_planet = { has_planet_flag = prison_station }
		}
		NOR = {
			has_planet_flag = prison_station
			has_modifier = penal_colony
			has_modifier = hunting_heretics
		}
	}

	effect = {
		add_modifier = { modifier = "hunting_heretics" days = -1 }
	}

	ai_weight = {
		weight = 1
	}
}

decision_end_hunting_heretics = {
	owned_planets_only = yes
	sound = event_administrative_work
	icon = decision_alien_propaganda

	resources = {
		category = decisions
	}

	potential = {
		has_modifier = hunting_heretics
	}

	effect = {
		remove_modifier = hunting_heretics
	}

	ai_weight = {
		weight = 5
		modifier = {
			weight = 1000
			any_owned_pop = { NOT = { has_ethic = ethic_materialist } }
		}
		modifier = {
			factor = 0
			owner = {
				any_owned_planet = { 
					has_planet_flag = prison_station
					num_pops < 5
				}
			}
		}
	}
}

decision_detention_operation = {
	owned_planets_only = yes
	sound = event_construction
	icon = decision_crime
	
	enactment_time = 90
	resources = {
		category = decisions
		cost = {
			unity = 1000
		}
	}
	
	potential = {
		owner = { 
			any_owned_planet = { has_planet_flag = prison_station }
		}
		OR = {
			AND = {
				has_modifier = anticrime_campaign
				any_owned_pop = { has_job = criminal }
			}
			AND = {
				has_modifier = political_persecution
				any_owned_pop = { has_ethic = ethic_egalitarian }
			}
			AND = {
				has_modifier = hunting_heretics
				any_owned_pop = { has_ethic = ethic_materialist }
			}
		}
		any_owned_pop = { has_job = enforcer }
	}
	
	allow = {
		is_controlled_by = owner
		has_ground_combat = no
		has_orbital_bombardment = no
	}
	
	effect = {
		hidden_effect = {
			owner = {
				random_owned_planet = { 
					limit = { 
						has_planet_flag = prison_station
						OR = {
							num_pops < 30
							NOT = { has_modifier = planet_population_control }
						}
					}
					save_event_target_as = prison_station
				}
			}
			
			if = {
				limit = { has_modifier = political_persecution }
				custom_tooltip = decision_detention_egalitarian_effect_desc
				random_owned_pop = {
					limit = { has_ethic = ethic_egalitarian }
					resettle_pop = {
						pop = this
						planet = event_target:prison_station
					}
				}
			}
			else_if ={
				limit = { has_modifier = hunting_heretics }
				custom_tooltip = decision_detention_materialist_effect_desc
				random_owned_pop = {
					limit = { has_ethic = ethic_materialist }
					resettle_pop = {
						pop = this
						planet = event_target:prison_station
					}
				}
			}
			else = {
				custom_tooltip = decision_detention_criminal_effect_desc
				random_owned_pop = {
					limit = {
						has_job = criminal
					}
					resettle_pop = {
						pop = this
						planet = event_target:prison_station
					}
				}
			}
			
			create_message = {
				type = FELONY_TRANSPORT
				localization = FELONY_TRANSPORT_DESC
				days = 30
				target = THIS
				variable = {
					type = name
					localization = PLANET
					scope = this
				}
				variable = {
					type = name
					localization = PRISON
					scope = event_target:prison_station
				}
			}
		}
	}
	
	ai_weight = {
		weight = 20
	}
}
