#########################
##### DRELL COMPACT #####
#########################

##### VESUVIUS NEBULA #####

sys_pompeii_init = {
    name = "Pompeii"
    class = "sc_g"
	flags = { outer_council_system vesuvius_nebula_system pompeii_system btr_system custom_system empire_home_system }
	
	init_effect = { 
		random_country = { 
			limit = { has_country_flag = courts_of_dekuuna } 
			save_global_event_target_as = courts_of_dekuuna
		}	
	generate_home_system_resources = yes
	}

	usage = custom_empire
	max_instances = 1	


    planet = {
	    name = "Pompeii"
        class = "pc_g_star"
        orbit_distance = 0
        size = 20
		flags = { pompeii_star }
    }
	
	planet = {
		name = "Rakhana"
		class = "pc_desert"
		orbit_distance = 45
		size = 18
		flags = { rakhana_planet pd_ignore }
		init_effect = {
			random_country = {
				limit = { has_country_flag = drell_compact }
				save_global_event_target_as = drell_compact
			}
			prevent_anomaly = yes
			set_global_flag = drell_homeworld_spawned
			if = {
				limit = { NOT = { any_country = { has_country_flag = drell_compact } } }
				create_species = { 
				    name = "Drell" 
				    class = DRE
				    portrait = drell 
				    homeworld = THIS 
				    traits = { 
						trait="trait_nonadaptive"
						trait="trait_strong"
						trait="trait_quick_learners"
						trait="trait_resilient"
						trait="trait_nomadic"
					} 
				}
				last_created_species = { save_global_event_target_as = drellSpecies }
				create_country = {
					name = "NAME_drell_compact"
					ship_prefix = "PRESCRIPTED_ship_prefix_drell_compact"
					type = minor_empire
					origin = "origin_drell_compact"
					ignore_initial_colony_error = yes
					civics = { civic = "civic_memorialist" civic = "civic_diplomatic_corps" }
					authority = auth_oligarchic
					name_list = "btr_drell"
					ethos = { ethic = "ethic_spiritualist" ethic = "ethic_egalitarian" ethic = "ethic_militarist" }
					species = event_target:drellSpecies
					flag = {
						icon={
							category="masseffect"
							file="Drell.dds"
						}
						background={
							category="backgrounds"
							file="00_solid.dds"
						}
						colors={
							"dark_green"
							"dark_green"
							"null"
							"null"
						}
					}
					effect = {
						set_graphical_culture = molluscoid_01
						set_country_flag = drell_compact
						set_country_flag = init_spawned
						set_country_flag = custom_start_screen
						set_country_flag = canon_map
						save_global_event_target_as = drell_compact
					}
				}
			}	
			set_capital = yes
			random_country = {
				limit = { has_country_flag = drell_compact }
				save_global_event_target_as = drell_compact
				species = { save_global_event_target_as = drellSpecies }
			}
			set_owner = event_target:drell_compact
			generate_btr_start_deposits_and_blockers = yes			
			generate_btr_drell_compact_capitol_buildings = yes
			generate_rakhana_pops = yes
			set_name = "Rakhana"
		}			
	}

	planet = {
		name = "Kahtack"
		class = "pc_iron"
		orbit_distance = 30
		size = 8
	}

	planet = {
		name = "Erusa"
		class = "pc_gas_giant"
		orbit_distance = 60
		size = 34
	}

    init_effect = { 
		spawn_megastructure = { 
			type = "olinprotectorate_vesuviusnebula_massrelay" 
			name = "Vesuvius_1_Relay"
			orbit_angle = 220 
			orbit_distance = 200
		} 
	}	
}
