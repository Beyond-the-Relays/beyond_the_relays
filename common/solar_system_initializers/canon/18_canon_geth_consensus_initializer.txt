##########################
##### GETH CONSENSUS #####
##########################

##### PERSEUS VEIL #####

sys_tikkun_init = {
    name = "Tikkun"
    class = "sc_k"
	flags = { empire_home_system btr_geth_consensus_system custom_system }	
	init_effect = { 
		random_country = { 
			limit = { has_country_flag = geth_consensus } 
			save_global_event_target_as = geth_consensus
		}	
	generate_home_system_resources = yes
	}

	usage = custom_empire
	max_instances = 1

    planet = {
		name = "Tikkun"
        class = pc_k_star
        orbit_distance = 0
        size = 20
		flags = { tikkun_star }
    }
	
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 60
	}

    planet = {
        name = "Rannoch"
        class = "pc_dextro_arid"
        orbit_distance = 40
		orbit_angle = { min = 40 max = 180 }
        size = 15
		has_ring = no
		starting_planet = yes
		deposit_blockers = none
		modifiers = none

		flags = { rannoch_planet pd_ignore }

		init_effect = {
			random_country = {
				limit = { has_country_flag = geth_consensus }
				save_global_event_target_as = geth_consensus
			}
			prevent_anomaly = yes
			set_global_flag = geth_homeworld_spawned

			if = {
				limit = { NOT = { any_country = { has_country_flag = geth_consensus } } }
				create_country = {
					name = "NAME_geth_consensus"
					ship_prefix = "PRESCRIPTED_ship_prefix_geth_consensus"
					type = default
					origin = "origin_geth_consensus"
					ignore_initial_colony_error = yes
					civics = { civic = "civic_machine_warbots" civic = "civic_machine_unitary_cohesion" }
					authority = auth_machine_intelligence
					name_list = "btr_geth"
					ethos = { ethic = "ethic_gestalt_consciousness" }
					species = event_target:gethSpecies
					flag = {
						icon={
							category="masseffect"
							file="Geth Armory.dds"
						}
						background={
							category="backgrounds"
							file="00_solid.dds"
						}
						colors={
							"dark_grey"
							"black"
							"null"
							"null"
						}
					}
					effect = {
						set_graphical_culture = geth_01
						set_country_flag = geth_consensus
						set_country_flag = init_spawned
						set_country_flag = custom_start_screen
						set_country_flag = canon_map
						save_global_event_target_as = geth_consensus
					}
				}
			}	
			set_capital = yes
			random_country = {
				limit = { has_country_flag = geth_consensus }
				save_global_event_target_as = geth_consensus
				species = { save_global_event_target_as = gethSpecies }
			}
			set_owner = event_target:geth_consensus
			generate_btr_start_deposits_and_blockers = yes
			generate_btr_geth_consensus_capitol_buildings = yes
			generate_rannoch_pops = yes
			set_name = "Rannoch"

			add_deposit = d_rannoch_geth_base
			add_deposit = d_rannoch_quarian_ruins
			add_deposit = d_rannoch_consensus_core
			add_deposit = d_rannoch_geth_factory
		}
		
		moon = {
			name = "Jelachai"
			class = "pc_iron"
			orbit_distance = 8
			size = 4
		}	
	}

	planet = {
		name = "Uriyah"
		class = "pc_iron"
		orbit_distance = 20
		size = 3
		moon = {
			name = "Etiel"
			class = "pc_iron"
			orbit_distance = 4
			size = 2
		}
	}	

    planet = {
        name = "Adas"
        class = "pc_geothermal"
        orbit_distance = 25
        orbit_angle = 171
        has_ring = no
		size = 11

    }

    planet = {
        name = "Kaddi"
        class = "pc_frozen"
        orbit_distance = 40
        orbit_angle = 40
        has_ring = no
		size = 25

    }

    planet = {
        name = "Haza"
        class = "pc_ice_giant"
        orbit_distance = 50
        orbit_angle = 281
        has_ring = no
		size = 26

    }
    
	init_effect = { 
		spawn_megastructure = { 
			type = "farrim_perseusveil_massrelay" 
			name = "Perseus_Relay"
			orbit_angle = 7 
			orbit_distance = 200
			
		} 
	}
}
