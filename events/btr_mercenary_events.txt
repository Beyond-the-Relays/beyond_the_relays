
namespace = btr_mercenary

# First Contact Mercenaries
country_event = {
	id = btr_mercenary.1
	title = "action.10.name"
	desc = "action.15.desc"
	picture = GFX_evt_star_chart
	location = FROMFROMFROM
	trackable = yes
	is_triggered_only = yes

	trigger = {
		FROM = { is_country_type = mercenary }
		is_country_type = default
		NOR = {
			AND = {
				has_country_flag = blood_pack_encountered
				from = { has_country_flag = blood_pack }
			}
			AND = {
				has_country_flag = blue_suns_encountered
				from = { has_country_flag = blue_suns }
			}
			AND = {
				has_country_flag = cat6_encountered
				from = { has_country_flag = cat6 }
			}
			AND = {
				has_country_flag = eclipse_encountered
				from = { has_country_flag = eclipse }
			}
		}
	}
	immediate = {
		from = { save_event_target_as = encountered_mercenary }
		capital_scope = { save_event_target_as = pc_home }
		from = {
			enable_special_project = {
				name = "INVESTIGATE_MERCENARIES"
				location = event_target:pc_home
				owner = ROOT
			}
		}
		if = {
			limit = {
				from = { has_country_flag = blood_pack }
			}
			set_country_flag = blood_pack_encountered
			break = yes
		}
		if = {
			limit = {
				from = { has_country_flag = blue_suns }
			}
			set_country_flag = blue_suns_encountered
			break = yes
		}
		if = {
			limit = {
				from = { has_country_flag = cat6 }
			}
			set_country_flag = cat6_encountered
		}
		if = {
			limit = {
				from = { has_country_flag = eclipse }
			}
			set_country_flag = eclipse_encountered
		}
	}
	option = {
		name = btr_mercenary.1.A
		tooltip = {
			enable_special_project = {
				name = "INVESTIGATE_MERCENARIES"
				location = event_target:pc_home
				owner = ROOT
			}
		}
	}
}

### Mercenaries Researched
country_event = {
	id = btr_mercenary.2
	title = btr_mercenary.2.name
	desc = btr_mercenary.2.desc
	picture = btr_GFX_evt_blue_suns_fleet
	show_sound = event_radio_chatter
	location = event_target:mercenary_system
	is_triggered_only = yes
	immediate = {
		event_target:encountered_mercenary = {
			establish_communications_no_message = ROOT
		}
		if = {
			limit = {
				event_target:encountered_mercenary = { has_country_flag = blood_pack }
			}
			random_system = {
				limit = { has_star_flag = btr_blood_pack_system }
				save_event_target_as = mercenary_system
			}
			break = yes
		}
		if = {
			limit = {
				event_target:encountered_mercenary = { has_country_flag = blue_suns }
			}
			random_system = {
				limit = { has_star_flag = btr_blue_suns_system }
				save_event_target_as = mercenary_system
			}
			break = yes
		}
		if = {
			limit = {
				event_target:encountered_mercenary = { has_country_flag = cat6 }
			}
			random_system = {
				limit = { has_star_flag = btr_cat6_system }
				save_event_target_as = mercenary_system
			}
		}
		if = {
			limit = {
				event_target:encountered_mercenary = { has_country_flag = eclipse }
			}
			random_system = {
				limit = { has_star_flag = btr_eclipse_system }
				save_event_target_as = mercenary_system
			}
		}
	}
	option = {
		name = btr_mercenary.2.a
		hidden_effect = {
			country_event = { id = btr_mercenary.3 }
		}
	}
}

# Mercenary Introduction
country_event = {
	id = btr_mercenary.3
	title = btr_mercenary.3000.name
	desc = {
		text = btr_mercenary.3.1.desc
		trigger = {
			event_target:encountered_mercenary = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.3.2.desc
		trigger = {
			event_target:encountered_mercenary = { has_country_flag = blue_suns }
		}
	}
	desc = {
		text = btr_mercenary.3.3.desc
		trigger = {
			event_target:encountered_mercenary = { has_country_flag = cat6 }
		}
	}
	desc = {
		text = btr_mercenary.3.4.desc
		trigger = {
			event_target:encountered_mercenary = { has_country_flag = eclipse }
		}
	}
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:encountered_mercenary
		room = mercenary_room
	}

	is_triggered_only = yes

	option = {
		name = btr_mercenary.3.a
	}
}

# Mercenary Evil Empire
country_event = {
	id = btr_mercenary.4
	title = btr_mercenary.3000.name
	desc = btr_mercenary.4.desc 
	diplomatic = yes
	picture_event_data = {
		portrait = from
		room = mercenary_room
	}
	is_triggered_only = yes
	force_open = yes
	trigger = {
		from = { is_country_type = mercenary }
		OR = {
			has_country_flag = geth_consensus
			has_country_flag = collectors
			has_country_flag = rachni_hive
		}
		NOT = {
			has_country_flag = mercenary_diplomacy_engaged
		}
	}
	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
	}
	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}
	option = {
		name = btr_mercenary.4.a 
		response_text = btr_mercenary.4.a.response 
	}
}

# Mercenary Main Menu
country_event = {
	id = btr_mercenary.5
	title = btr_mercenary.3.name
	
	# Blood Pack
	desc = {
		text = btr_mercenary.5.1.desc
		trigger = {
			event_target:current_mercenary_diplomacy = {
				has_country_flag = blood_pack
			}
		}
	}

	# Blue Suns
	desc = {
		text = btr_mercenary.5.2.desc
		trigger = {
			event_target:current_mercenary_diplomacy = {
				has_country_flag = blue_suns
			}
		}
	}

	# Cat6
	desc = {
		text = btr_mercenary.5.3.desc
		trigger = {
			event_target:current_mercenary_diplomacy = {
				has_country_flag = cat6
			}
		}
	}

	# Eclipse
	desc = {
		text = btr_mercenary.5.4.desc
		trigger = {
			event_target:current_mercenary_diplomacy = {
				has_country_flag = eclipse
			}
		}
	}

	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}

	is_triggered_only = yes
	diplomatic = yes
	force_open = yes
	trigger = {
		from = {
			OR = {
				has_country_flag = blood_pack
				has_country_flag = blue_suns
				has_country_flag = cat6
				has_country_flag = eclipse
			}
		}
	}
	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
		from = {
			owner_species = { save_event_target_as = mercenary_species }
			save_event_target_as = current_mercenary_diplomacy
		}
	}
	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}
	option = {
		name = btr_mercenary.5.a # Raid someone
		trigger = {
			event_target:current_mercenary_diplomacy = {
				NOR = {
					has_country_flag = raid_ongoing
					has_country_flag = raid_cooldown
				}
			}
		}
		custom_tooltip = encourage_merc_raid
		allow = {
			custom_tooltip = {
				fail_text = marauder.20.need_rivals
				any_relation = {
					root = { is_rival = prev }
				}
			}
		}
		hidden_effect = {
			country_event = { id = btr_mercenary.6 } # 7 8
		}
	}

	option = {
		name = btr_mercenary.5.a # Already raiding
		trigger = {
			event_target:current_mercenary_diplomacy = {
				has_country_flag = raid_ongoing
			}
		}
		response_text = btr_mercenary.5.a.busy.response
		is_dialog_only = yes
	}

	option = {
		name = btr_mercenary.5.a # Raid cooldown
		trigger = {
			event_target:current_mercenary_diplomacy = {
				has_country_flag = raid_cooldown
			}
		}
		response_text = btr_mercenary.5.a.cooldown.response
		is_dialog_only = yes
	}

	option = {
		name = btr_mercenary.5.b # Hire leader
		custom_tooltip = hire_mercenary_leader_new
		hidden_effect = {
			country_event = { id = btr_mercenary.10 }
		}
	}

	option = {
		name = btr_mercenary.5.c # Hire fleet
		trigger = {
			OR = {
				event_target:current_mercenary_diplomacy = {
					has_country_flag = blood_pack
					has_country_flag = mercenaries_available_1
				}
				event_target:current_mercenary_diplomacy = {
					has_country_flag = blue_suns
					has_country_flag = mercenaries_available_2
				}
				event_target:current_mercenary_diplomacy = {
					has_country_flag = cat6
					has_country_flag = mercenaries_available_3
				}
				event_target:current_mercenary_diplomacy = {
					has_country_flag = eclipse
					has_country_flag = mercenaries_available_4
				}
			}
			NOT = {
				event_target:current_mercenary_diplomacy = {
					AND = {
						has_country_flag = merc_fleet_1_hired
						has_country_flag = merc_fleet_2_hired
						has_country_flag = merc_fleet_3_hired
					}
				}
			}
		}
		custom_tooltip = hire_merc_fleet
		hidden_effect = {
			country_event = { id = btr_mercenary.11 }
		}
	}

	option = {
		name = btr_mercenary.5.d # End communications
		default_hide_option = yes
	}
}

# Mercenary Raid Target
country_event = {
	id = btr_mercenary.6
	title = btr_mercenary.3.name
	desc = btr_mercenary.6.desc
	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}
	is_triggered_only = yes
	diplomatic = yes
	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
		random_rival_country = {
			save_event_target_as = raid_target_1
		}
		random_rival_country = {
			limit = {
				NOT = { is_same_value = event_target:raid_target_1 }
			}
			save_event_target_as = raid_target_2
		}
		random_rival_country = {
			limit = {
				NOR = {
					is_same_value = event_target:raid_target_1
					is_same_value = event_target:raid_target_2
				}
			}
			save_event_target_as = raid_target_3
		}
		random_rival_country = {
			limit = {
				NOR = {
					is_same_value = event_target:raid_target_1
					is_same_value = event_target:raid_target_2
					is_same_value = event_target:raid_target_3
				}
			}
			save_event_target_as = raid_target_4
		}
	}
	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}
	option = {
		name = btr_mercenary.6.a
		trigger = {
			exists = event_target:raid_target_1
		}
		hidden_effect = {
			event_target:raid_target_1 = { save_event_target_as = preliminary_target }
			if = {
				limit = {
					event_target:raid_target_1 = {
						NOR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				country_event = { id = btr_mercenary.7 }
				break = yes
			}
			if = {
				limit = {
					event_target:raid_target_1 = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				country_event = { id = btr_mercenary.9 }
			}
		}
	}
	option = {
		name = btr_mercenary.6.b
		trigger = {
			exists = event_target:raid_target_2
		}
		hidden_effect = {
			event_target:raid_target_2 = { save_event_target_as = preliminary_target }
			if = {
				limit = {
					event_target:raid_target_2 = {
						NOR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				country_event = { id = btr_mercenary.7 }
				break = yes
			}
			if = {
				limit = {
					event_target:raid_target_2 = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				country_event = { id = btr_mercenary.9 }
			}
		}
	}
	option = {
		name = btr_mercenary.6.c
		trigger = {
			exists = event_target:raid_target_3
		}
		hidden_effect = {
			event_target:raid_target_3 = { save_event_target_as = preliminary_target }
			if = {
				limit = {
					event_target:raid_target_3 = {
						NOR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				country_event = { id = btr_mercenary.7 }
				break = yes
			}
			if = {
				limit = {
					event_target:raid_target_3 = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				country_event = { id = btr_mercenary.9 }
			}
		}
	}
	option = {
		name = btr_mercenary.6.d
		trigger = {
			exists = event_target:raid_target_4
		}
		hidden_effect = {
			event_target:raid_target_4 = { save_event_target_as = preliminary_target }
			if = {
				limit = {
					event_target:raid_target_4 = {
						NOR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				country_event = { id = btr_mercenary.7 }
				break = yes
			}
			if = {
				limit = {
					event_target:raid_target_4 = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
				country_event = { id = btr_mercenary.9 }
			}
		}
	}
	option = {
		name = btr_mercenary.6.e # go back
		hidden_effect = {
			country_event = { id = btr_mercenary.5 }
		}
	}
	option = {
		name = btr_mercenary.5.d # End communications
		default_hide_option = yes
	}
}

# Mercenary Preliminary Raiding Target
country_event = {
	id = btr_mercenary.7
	title = btr_mercenary.3.name
	desc = btr_mercenary.7.desc
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}
	is_triggered_only = yes
	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}
	option = {
		name = btr_mercenary.7.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @raidallow }
		}
		add_resource = { energy = @raidcost }
		response_text = btr_mercenary.7.1.a.response
		custom_tooltip = hire_raid_merc_fleet
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { save_event_target_as = raiding_mercenary }
			event_target:preliminary_target = {
				country_event = { id = btr_mercenary.8 }
			}
		}
	}
	option = {
		name = btr_mercenary.7.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @raidallow }
		}
		add_resource = { energy = @raidcost }
		response_text = btr_mercenary.7.1.a.response
		custom_tooltip = hire_raid_merc_fleet
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { save_event_target_as = raiding_mercenary }
			event_target:preliminary_target = {
				country_event = { id = btr_mercenary.8 }
			}
		}
	}
	option = {
		name = btr_mercenary.7.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = cat6 }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @raidallow }
		}
		add_resource = { energy = @raidcost }
		response_text = btr_mercenary.7.1.a.response
		custom_tooltip = hire_raid_merc_fleet
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { save_event_target_as = raiding_mercenary }
			event_target:preliminary_target = {
				country_event = { id = btr_mercenary.8 }
			}
		}
	}
	option = {
		name = btr_mercenary.7.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = eclipse }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @raidallow }
		}
		add_resource = { energy = @raidcost }
		response_text = btr_mercenary.7.1.a.response
		custom_tooltip = hire_raid_merc_fleet
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { save_event_target_as = raiding_mercenary }
			event_target:preliminary_target = {
				country_event = { id = btr_mercenary.8 }
			}
		}
	}
	option = {
		name = btr_mercenary.6.e # go back
		hidden_effect = {
			country_event = { id = btr_mercenary.5 }
		}
	}
	option = {
		name = btr_mercenary.5.d # End communications
		default_hide_option = yes
	}
}

# Mercenary Raid Starts
country_event = {
	id = btr_mercenary.8
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		from = { set_country_flag = hired@event_target:raiding_mercenary }
		if = {
			limit = {
				event_target:raiding_mercenary = { has_country_flag = blood_pack }
			}
			random_system = {
				limit = { has_star_flag = btr_blood_pack_system }
				save_event_target_as = mercenary_system
				random_system_planet = {
					limit = { has_planet_flag = raid_source }
					save_event_target_as = raid_source
				}
			}
		}
		if = {
			limit = {
				event_target:raiding_mercenary = { has_country_flag = blue_suns }
			}
			random_system = {
				limit = { has_star_flag = btr_blue_suns_system }
				save_event_target_as = mercenary_system
				random_system_planet = {
					limit = { has_planet_flag = raid_source }
					save_event_target_as = raid_source
				}
			}
		}
		if = {
			limit = {
				event_target:raiding_mercenary = { has_country_flag = cat6 }
			}
			random_system = {
				limit = { has_star_flag = btr_cat6_system }
				save_event_target_as = mercenary_system
				random_system_planet = {
					limit = { has_planet_flag = raid_source }
					save_event_target_as = raid_source
				}
			}
		}
		if = {
			limit = {
				event_target:raiding_mercenary = { has_country_flag = eclipse }
			}
			random_system = {
				limit = { has_star_flag = btr_eclipse_system }
				save_event_target_as = mercenary_system
				random_system_planet = {
					limit = { has_planet_flag = raid_source }
					save_event_target_as = raid_source
				}
			}
		}
		save_event_target_as = mercenary_target
		from = {
			save_event_target_as = mercenary_employer
			set_relation_flag = {
				who = event_target:raiding_mercenary
				flag = hired_fleet
			}
		}
		set_relation_flag = {
			who = event_target:raiding_mercenary
			flag = current_hired_target
		}
		event_target:raiding_mercenary = {
			set_country_flag = raid_ongoing
		}
		create_country = {
			name = event_target:raiding_mercenary
			type = "marauder_raiders"
			flag = event_target:raiding_mercenary
			effect = {
				save_event_target_as = mercenary_raiding_country
				if = {
					limit = { event_target:raiding_mercenary = { has_country_flag = blood_pack } }
					set_country_flag = blood_pack
				}
				if = {
					limit = { event_target:raiding_mercenary = { has_country_flag = blue_suns } }
					set_country_flag = blue_suns
				}
				if = {
					limit = { event_target:raiding_mercenary = { has_country_flag = cat6 } }
					set_country_flag = cat6
				}
				if = {
					limit = { event_target:raiding_mercenary = { has_country_flag = eclipse } }
					set_country_flag = eclipse
				}
				set_country_flag = raid_ongoing
			}
		}
		event_target:mercenary_raiding_country = {
			every_country = { establish_communications_no_message = event_target:mercenary_raiding_country }
			event_target:raiding_mercenary = {
				set_country_flag = parent_of@event_target:mercenary_raiding_country
				set_faction_hostility = {
					target = event_target:mercenary_raiding_country
					set_hostile = no
					set_neutral = no
					set_friendly = yes
				}
			}
			create_leader = {
				class = admiral
				species = event_target:mercenary_species
				name = random
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = random_trait
					trait = leader_trait_mercenary_warrior
				}
			}
			create_fleet = {
				name = "NAME_Raiding_Fleet"
				effect = {
					set_owner = event_target:raiding_mercenary # For ship names
					create_marauder_raiders = yes
					set_location = event_target:raid_source
					set_fleet_stance = aggressive
					set_fleet_bombardment_stance = indiscriminate
					set_aggro_range_measure_from = self
					set_aggro_range = 150
					set_fleet_flag = hired_raiding_fleet
					set_fleet_flag = raiding_fleet
					set_owner = event_target:mercenary_raiding_country # Real owner
					assign_leader = last_created_leader

					closest_system = {
						limit = {
							any_system_planet = {
								exists = owner
								owner = { is_same_value = event_target:mercenary_target }
								num_pops > 0
							}
						}
						save_event_target_as = raid_system
					}
					event_target:raid_system = {
						random_system_planet = {
							limit = {
								exists = owner
								owner = { is_same_value = event_target:mercenary_target }
								num_pops > 0
							}
							save_event_target_as = raid_planet
						}
					}
					auto_move_to_planet = {
						target = event_target:raid_planet
						clear_auto_move_on_arrival = no
					}
				}
			}
			set_faction_hostility = {
				target = event_target:mercenary_target
				set_hostile = yes
				set_neutral = no
				set_friendly = no
			}
		}
		country_event = { id = btr_mercenary.100 }
		if = {
			limit = {
				event_target:mercenary_target = {
					has_communications = event_target:raiding_mercenary
				}
			}
			country_event = { id = btr_mercenary.100 }
		}
		else = {
			country_event = { id = btr_mercenary.101 }
		}
	}
}

# Mercenary Preliminary Raiding Target Fallen Empire
country_event = {
	id = btr_mercenary.9
	title = btr_mercenary.3.name
	desc = {
		text = btr_mercenary.9.1.desc
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.9.2.desc
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns }
		}
	}
	desc = {
		text = btr_mercenary.9.3.desc
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = cat6 }
		}
	}
	desc = {
		text = btr_mercenary.9.4.desc
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = eclipse }
		}
	}
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}
	is_triggered_only = yes
	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
	}
	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}
	option = {
		name = btr_mercenary.9.a
		hidden_effect = {
			country_event = { id = btr_mercenary.5 }
		}
	}
	option = {
		name = btr_mercenary.5.d # End communications
		default_hide_option = yes
	}
}

# Hire Leader
country_event = {
	id = btr_mercenary.10
	title = btr_mercenary.3.name
	desc = {
		text = btr_mercenary.10.1.desc
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.10.2.desc
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns }
		}
	}
	desc = {
		text = btr_mercenary.10.3.desc
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = cat6 }
		}
	}
	desc = {
		text = btr_mercenary.10.4.desc
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = eclipse }
		}
	}

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}

	is_triggered_only = yes

	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}

	### Blood Pack

	# Hire Admiral
	option = {
		name = btr_mercenary.10.1.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @leaderallow }
		}
		add_resource = { energy = @leadercost }
		custom_tooltip = hire_admiral_mercenary
		hidden_effect = {
			create_leader = {
				class = admiral
				species = event_target:mercenary_species
				name = random
				event_leader = yes
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = leader_trait_mercenary_warrior
					trait = random_trait
				}
			}
			last_created_leader = {
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack } }
					set_leader_flag = hired_merc_leader_1
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns } }
					set_leader_flag = hired_merc_leader_2
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = cat6 } }
					set_leader_flag = hired_merc_leader_3
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = eclipse } }
					set_leader_flag = hired_merc_leader_4
				}
			}
		}
		response_text = btr_mercenary.10.a.response
		is_dialog_only = yes
	}
	# Hire General
	option = {
		name = btr_mercenary.10.2.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @leaderallow }
		}
		add_resource = { energy = @leadercost }
		custom_tooltip = hire_general_mercenary
		hidden_effect = {
			create_leader = {
				class = general
				species = event_target:mercenary_species
				name = random
				event_leader = yes
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = leader_trait_general_mercenary_warrior
					trait = random_trait
				}
			}
			last_created_leader = {
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack } }
					set_leader_flag = hired_merc_leader_1
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns } }
					set_leader_flag = hired_merc_leader_2
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = cat6 } }
					set_leader_flag = hired_merc_leader_3
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = eclipse } }
					set_leader_flag = hired_merc_leader_3
				}
			}
		}
		response_text = btr_mercenary.10.a.response
		is_dialog_only = yes
	}

	### Blue Suns

	# Hire Admiral
	option = {
		name = btr_mercenary.10.1.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @leaderallow }
		}
		add_resource = { energy = @leadercost }
		custom_tooltip = hire_admiral_mercenary
		hidden_effect = {
			create_leader = {
				class = admiral
				species = event_target:mercenary_species
				name = random
				event_leader = yes
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = leader_trait_mercenary_warrior
					trait = random_trait
				}
			}
			last_created_leader = {
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack } }
					set_leader_flag = hired_merc_leader_1
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns } }
					set_leader_flag = hired_merc_leader_2
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = cat6 } }
					set_leader_flag = hired_merc_leader_3
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = eclipse } }
					set_leader_flag = hired_merc_leader_3
				}
			}
		}
		response_text = btr_mercenary.10.b.response
		is_dialog_only = yes
	}
	# Hire General
	option = {
		name = marauder.40.2.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @leaderallow }
		}
		add_resource = { energy = @leadercost }
		custom_tooltip = hire_general_mercenary
		hidden_effect = {
			create_leader = {
				class = general
				species = event_target:mercenary_species
				name = random
				event_leader = yes
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = leader_trait_general_mercenary_warrior
					trait = random_trait
				}
			}
			last_created_leader = {
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack } }
					set_leader_flag = hired_merc_leader_1
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns } }
					set_leader_flag = hired_merc_leader_2
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = cat6 } }
					set_leader_flag = hired_merc_leader_3
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = eclipse } }
					set_leader_flag = hired_merc_leader_3
				}
			}
		}
		response_text = btr_mercenary.10.b.response
		is_dialog_only = yes
	}

	### Cat6

	# Hire Admiral
	option = {
		name = btr_mercenary.10.1.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = cat6 }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @leaderallow }
		}
		add_resource = { energy = @leadercost }
		custom_tooltip = hire_admiral_mercenary
		hidden_effect = {
			create_leader = {
				class = admiral
				species = event_target:mercenary_species
				name = random
				event_leader = yes
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = leader_trait_mercenary_warrior
					trait = random_trait
				}
			}
			last_created_leader = {
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack } }
					set_leader_flag = hired_merc_leader_1
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns } }
					set_leader_flag = hired_merc_leader_2
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = cat6 } }
					set_leader_flag = hired_merc_leader_3
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = eclipse } }
					set_leader_flag = hired_merc_leader_3
				}
			}
		}
		response_text = btr_mercenary.10.c.response
		is_dialog_only = yes
	}
	# Hire General
	option = {
		name = btr_mercenary.10.2.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = cat6 }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @leaderallow }
		}
		add_resource = { energy = @leadercost }
		custom_tooltip = hire_general_mercenary
		hidden_effect = {
			create_leader = {
				class = general
				species = event_target:mercenary_species
				name = random
				event_leader = yes
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = leader_trait_general_mercenary_warrior
					trait = random_trait
				}
			}
			last_created_leader = {
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack } }
					set_leader_flag = hired_merc_leader_1
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns } }
					set_leader_flag = hired_merc_leader_2
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = cat6 } }
					set_leader_flag = hired_merc_leader_3
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = eclipse } }
					set_leader_flag = hired_merc_leader_3
				}
			}
		}
		response_text = btr_mercenary.10.c.response
		is_dialog_only = yes
	}

	### Eclipse

	# Hire Admiral
	option = {
		name = btr_mercenary.10.1.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = eclipse }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @leaderallow }
		}
		add_resource = { energy = @leadercost }
		custom_tooltip = hire_admiral_mercenary
		hidden_effect = {
			create_leader = {
				class = admiral
				species = event_target:mercenary_species
				name = random
				event_leader = yes
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = leader_trait_mercenary_warrior
					trait = random_trait
				}
			}
			last_created_leader = {
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack } }
					set_leader_flag = hired_merc_leader_1
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns } }
					set_leader_flag = hired_merc_leader_2
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = cat6 } }
					set_leader_flag = hired_merc_leader_3
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = eclipse } }
					set_leader_flag = hired_merc_leader_3
				}
			}
		}
		response_text = btr_mercenary.10.d.response
		is_dialog_only = yes
	}
	# Hire General
	option = {
		name = btr_mercenary.10.2.a
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = eclipse }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @leaderallow }
		}
		add_resource = { energy = @leadercost }
		custom_tooltip = hire_general_mercenary
		hidden_effect = {
			create_leader = {
				class = general
				species = event_target:mercenary_species
				name = random
				event_leader = yes
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = leader_trait_general_mercenary_warrior
					trait = random_trait
				}
			}
			last_created_leader = {
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack } }
					set_leader_flag = hired_merc_leader_1
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns } }
					set_leader_flag = hired_merc_leader_2
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = cat6 } }
					set_leader_flag = hired_merc_leader_3
					break = yes
				}
				if = {
					limit = { event_target:current_mercenary_diplomacy = { has_country_flag = eclipse } }
					set_leader_flag = hired_merc_leader_3
				}
			}
		}
		response_text = btr_mercenary.10.d.response
		is_dialog_only = yes
	}

	option = {
		name = btr_mercenary.10.e
		hidden_effect = {
			country_event = { id = btr_mercenary.5 }
		}
	}
	option = {
		name = btr_mercenary.10.f
		default_hide_option = yes
	}
}

# Hired Mercenaries Approach
country_event = {
	id = btr_mercenary.100
	title = btr_mercenary.100.name
	desc = btr_mercenary.100.desc
	picture = btr_GFX_evt_blue_suns_fleet
	show_sound = event_radio_chatter
	is_triggered_only = yes
	option = {
		name = ONSCREEN
		hidden_effect = {
			country_event = { id = btr_mercenary.102 }
		}
	}
}

# Hired Mercenaries Approach - Unknown
country_event = {
	id = btr_mercenary.101
	title = btr_mercenary.101.name
	desc = btr_mercenary.101.desc
	picture = btr_GFX_evt_blue_suns_fleet
	show_sound = event_radio_chatter
	is_triggered_only = yes
	immediate = {
		establish_communications_no_message = event_target:raiding_mercenary
	}
	option = {
		name = ONSCREEN
		hidden_effect = {
			country_event = { id = btr_mercenary.102 }
		}
	}
}

# Hired Mercenaries Approach - Transmission
country_event = {
	id = btr_mercenary.102
	title = btr_mercenary.3.name
	desc = {
		text = btr_mercenary.102.1.desc
		trigger = {
			event_target:encountered_mercenary = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.102.2.desc
		trigger = {
			event_target:encountered_mercenary = { has_country_flag = blue_suns }
		}
	}
	desc = {
		text = btr_mercenary.102.3.desc
		trigger = {
			event_target:encountered_mercenary = { has_country_flag = cat6 }
		}
	}
	desc = {
		text = btr_mercenary.102.4.desc
		trigger = {
			event_target:encountered_mercenary = { has_country_flag = eclipse }
		}
	}
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:raiding_mercenary
		room = mercenary_room
	}
	is_triggered_only = yes
	option = {
		name = btr_mercenary.102.a
	}
}

# Hire Mercenary Fleet
country_event = {
	id = btr_mercenary.11
	title = btr_mercenary.3.name
	desc = btr_mercenary.11.desc
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}
	is_triggered_only = yes
	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}
	# Blood Pack
	option = {
		name = btr_mercenary.11.1.a # Hire Brood's Vanguard
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_1_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @largemercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_1_hired } }
			}
		}
		add_resource = { energy = @largemerccost }
		custom_tooltip = merc_fleet_hire_large
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_1_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_broods_vanguard = yes
					set_location = root.capital_scope
					assign_leader = last_created_leader
					set_fleet_flag = broods_vanguard
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "Brood's Vanguard"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.11.1.b # Hire 3rd Strike Fleet
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_2_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @mediummercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_2_hired } }
			}
		}
		add_resource = { energy = @mediummerccost }
		custom_tooltip = merc_fleet_hire_medium
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_2_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_3rd_strike_fleet = yes
					set_location = root.capital_scope
					assign_leader = last_created_leader
					set_fleet_flag = 3rd_strike_fleet
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "3rd Strike Fleet"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.11.1.c # Hire Kureck's Support Fleet
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blood_pack }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_3_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @smallmercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_3_hired } }
			}
		}
		add_resource = { energy = @smallmerccost }
		custom_tooltip = merc_fleet_hire_small
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_3_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_kurecks_support_fleet = yes
					assign_leader = last_created_leader
					set_location = root.capital_scope
					set_fleet_flag = kurecks_support_fleet
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "Kureck's Support Fleet"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}

	# Blue Suns
	option = {
		name = btr_mercenary.11.2.a # Hire 2nd Blue Suns Fleet
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_1_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @largemercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_1_hired } }
			}
		}
		add_resource = { energy = @largemerccost }
		custom_tooltip = merc_fleet_hire_large
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_1_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_2nd_blue_suns_fleet = yes
					set_location = root.capital_scope
					assign_leader = last_created_leader
					set_fleet_flag = 2nd_blue_suns_fleet
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "2nd Blue Suns Fleet"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.11.2.b # Hire 4th Blue Suns Fleet
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_2_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @mediummercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_2_hired } }
			}
		}
		add_resource = { energy = @mediummerccost }
		custom_tooltip = merc_fleet_hire_medium
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_2_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_4th_blue_suns_fleet = yes
					set_location = root.capital_scope
					assign_leader = last_created_leader
					set_fleet_flag = 4th_blue_suns_fleet
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "4th Blue Suns Fleet"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.11.2.c # Hire 9th Auxiliary Blue Suns Fleet
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = blue_suns }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_3_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @smallmercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_3_hired } }
			}
		}
		add_resource = { energy = @smallmerccost }
		custom_tooltip = merc_fleet_hire_small
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_3_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_9th_auxiliary_blue_suns_fleet = yes
					assign_leader = last_created_leader
					set_location = root.capital_scope
					set_fleet_flag = 9th_auxiliary_blue_suns_fleet
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "9th Auxiliary Blue Suns Fleet"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}

	# Cat6
	option = {
		name = btr_mercenary.11.3.a # Hire Razor Fleet
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = cat6 }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_1_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @largemercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_1_hired } }
			}
		}
		add_resource = { energy = @largemerccost }
		custom_tooltip = merc_fleet_hire_large
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_1_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_razor_fleet = yes
					set_location = root.capital_scope
					assign_leader = last_created_leader
					set_fleet_flag = razor_fleet
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "Razor Fleet"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.11.3.b # Hire Sword Command
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = cat6 }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_2_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @mediummercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_2_hired } }
			}
		}
		add_resource = { energy = @mediummerccost }
		custom_tooltip = merc_fleet_hire_medium
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_2_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_sword_command = yes
					set_location = root.capital_scope
					assign_leader = last_created_leader
					set_fleet_flag = sword_command
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "Sword Command"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.11.3.c # Hire Dagger Squadron
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = cat6 }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_3_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @smallmercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_3_hired } }
			}
		}
		add_resource = { energy = @smallmerccost }
		custom_tooltip = merc_fleet_hire_small
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_3_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_dagger_squadron = yes
					assign_leader = last_created_leader
					set_location = root.capital_scope
					set_fleet_flag = dagger_squadron
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "Dagger Squadron"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}

	# Eclipse
	option = {
		name = btr_mercenary.11.4.a # Hire Basilisk Guard
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = eclipse }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_1_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @largemercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_1_hired } }
			}
		}
		add_resource = { energy = @largemerccost }
		custom_tooltip = merc_fleet_hire_large
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_1_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_basilisk_guard = yes
					set_location = root.capital_scope
					assign_leader = last_created_leader
					set_fleet_flag = basilisk_guard
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "Basilisk Guard"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.11.4.b # Hire Supernova Renegades
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = eclipse }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_2_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @mediummercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_2_hired } }
			}
		}
		add_resource = { energy = @mediummerccost }
		custom_tooltip = merc_fleet_hire_medium
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_2_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_supernova_renegades = yes
					set_location = root.capital_scope
					assign_leader = last_created_leader
					set_fleet_flag = supernova_renegades
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "Supernova Renegades"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.11.4.c # Hire Pulsar Fleet
		trigger = {
			event_target:current_mercenary_diplomacy = { has_country_flag = eclipse }
			NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_3_hired } }
		}
		allow = {
			resource_stockpile_compare = { resource = energy value >= @smallmercallow }
			hidden_trigger = {
				NOT = { event_target:current_mercenary_diplomacy = { has_country_flag = merc_fleet_3_hired } }
			}
		}
		add_resource = { energy = @smallmerccost }
		custom_tooltip = merc_fleet_hire_small
		hidden_effect = {
			event_target:current_mercenary_diplomacy = { set_country_flag = merc_fleet_3_hired }

			create_merc_admiral = yes
			create_fleet = {
				effect = {
					set_owner = root
					save_event_target_as = hired_merc_fleet
					create_pulsar_fleet = yes
					assign_leader = last_created_leader
					set_location = root.capital_scope
					set_fleet_flag = pulsar_fleet
					fleet_event = { id = btr_mercenary.13 days = 1800 }
					set_name = "Pulsar Fleet"
				}
				settings = {
					can_upgrade = no
					can_disband = no
					can_change_composition = no
					can_change_leader = no
					uses_naval_capacity = no
				}
			}
			country_event = { id = btr_mercenary.12 }
		}
	}
	option = {
		name = btr_mercenary.9.a
		hidden_effect = {
			country_event = { id = btr_mercenary.5 }
		}
	}
	option = {
		name = btr_mercenary.5.d # End communications
		default_hide_option = yes
	}
}

# Mercenary Fleet Hired
country_event = {
	id = btr_mercenary.12
	title = btr_mercenary.3.name
	desc = btr_mercenary.12.desc
	diplomatic = yes
	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}
	is_triggered_only = yes
	immediate = {
		set_country_flag = marauder_mercenary_engaged
	}

	after = {
		hidden_effect = {
			remove_country_flag = marauder_mercenary_engaged
		}
	}
	option = {
		name = btr_mercenary.12.a
		hidden_effect = {
			country_event = { id = btr_mercenary.5 }
		}
	}
	option = {
		name = btr_mercenary.5.d # End communications
		default_hide_option = yes
	}
}

# Mercenary Fleet Contract Ends
fleet_event = {
	id = btr_mercenary.13
	title = btr_mercenary.13.name
	desc = btr_mercenary.13.desc
	picture = btr_GFX_evt_blue_suns_fleet
	show_sound = event_radio_chatter
	location = this
	is_triggered_only = yes

	option = { # Extend contract 1
		name = btr_mercenary.13.a
		allow = { owner = { resource_stockpile_compare = { resource = energy value >= @largemercallow } } }
		trigger = {
			OR = {
				has_fleet_flag = broods_vanguard
				has_fleet_flag = 2nd_blue_suns_fleet
				has_fleet_flag = razor_fleet
				has_fleet_flag = basilisk_guard
			}
		}
		owner = { add_resource = { energy = @largemerccost } }
		hidden_effect = {
			fleet_event = { id = btr_mercenary.13 days = 1800 }
		}
	}
	option = { # Extend contract 2
		name = btr_mercenary.13.a
		allow = { owner = { resource_stockpile_compare = { resource = energy value >= @mediummercallow } } }
		trigger = {
			OR = {
				has_fleet_flag = 3rd_strike_fleet
				has_fleet_flag = 4th_blue_suns_fleet
				has_fleet_flag = sword_command
				has_fleet_flag = supernova_renegades
			}
		}
		owner = { add_resource = { energy = @mediummerccost } }
		hidden_effect = {
			fleet_event = { id = btr_mercenary.13 days = 1800 }
		}
	}
	option = { # Extend contract 3
		name = btr_mercenary.13.a
		allow = { owner = { resource_stockpile_compare = { resource = energy value >= @smallmercallow } } }
		trigger = {
			OR = {
				has_fleet_flag = kurecks_support_fleet
				has_fleet_flag = 9th_auxiliary_blue_suns_fleet
				has_fleet_flag = dagger_squadron
				has_fleet_flag = pulsar_fleet
			}
		}
		owner = { add_resource = { energy = @smallmerccost } }
		hidden_effect = {
			fleet_event = { id = btr_mercenary.13 days = 1800 }
		}
	}
	option = { # Decline
		name = btr_mercenary.13.b
		ai_chance = {
			factor = 100
		}
		hidden_effect = {
			# Blood Pack fleets
			if = {
				limit = { has_fleet_flag = broods_vanguard }
				event_target:blood_pack = {
					remove_country_flag = merc_fleet_1_hired
				}
			}
			if = {
				limit = { has_fleet_flag = 3rd_strike_fleet }
				event_target:blood_pack = {
					remove_country_flag = merc_fleet_2_hired
				}
			}
			if = {
				limit = { has_fleet_flag = kurecks_support_fleet }
				event_target:blood_pack = {
					remove_country_flag = merc_fleet_3_hired
				}
			}
			# Blue Suns fleets
			if = {
				limit = { has_fleet_flag = 2nd_blue_suns_fleet }
				event_target:blue_suns = {
					remove_country_flag = merc_fleet_1_hired
				}
			}
			if = {
				limit = { has_fleet_flag = 4th_blue_suns_fleet }
				event_target:blue_suns = {
					remove_country_flag = merc_fleet_2_hired
				}
			}
			if = {
				limit = { has_fleet_flag = 9th_auxiliary_blue_suns_fleet }
				event_target:blue_suns = {
					remove_country_flag = merc_fleet_3_hired
				}
			}
			# Cat6 fleets
			if = {
				limit = { has_fleet_flag = razor_fleet }
				event_target:cat6 = {
					remove_country_flag = merc_fleet_1_hired
				}
			}
			if = {
				limit = { has_fleet_flag = sword_command }
				event_target:cat6 = {
					remove_country_flag = merc_fleet_2_hired
				}
			}
			if = {
				limit = { has_fleet_flag = dagger_squadron }
				event_target:cat6 = {
					remove_country_flag = merc_fleet_3_hired
				}
			}
			# Eclipse fleets
			if = {
				limit = { has_fleet_flag = basilisk_guard }
				event_target:eclipse = {
					remove_country_flag = merc_fleet_1_hired
				}
			}
			if = {
				limit = { has_fleet_flag = supernova_renegades }
				event_target:eclipse = {
					remove_country_flag = merc_fleet_2_hired
				}
			}
			if = {
				limit = { has_fleet_flag = pulsar_fleet }
				event_target:eclipse = {
					remove_country_flag = merc_fleet_3_hired
				}
			}
			leader = {
				remove_leader_flag = mercenary_merc_leader
				kill_leader = { show_notification = no }
			}
			delete_fleet = this
		}
	}
}

# Mercenary Fleet Destroyed
country_event = {
	id = btr_mercenary.14
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		fromfrom = {
			OR = {
				has_fleet_flag = broods_vanguard
				has_fleet_flag = 3rd_strike_fleet
				has_fleet_flag = kurecks_support_fleet
				has_fleet_flag = 2nd_blue_suns_fleet
				has_fleet_flag = 4th_blue_suns_fleet
				has_fleet_flag = 9th_auxiliary_blue_suns_fleet
				has_fleet_flag = razor_fleet
				has_fleet_flag = sword_command
				has_fleet_flag = dagger_squadron
				has_fleet_flag = basilisk_guard
				has_fleet_flag = supernova_renegades
				has_fleet_flag = pulsar_fleet
			}
		}
	}
	immediate = {
		if = {
			limit = {
				exists = fromfrom.leader
			}
			fromfrom.leader = {  remove_leader_flag = mercenary_merc_leader }
		}
		# Blood Pack
		if = {
			limit = {
				fromfrom = {
					OR = {
						has_fleet_flag = broods_vanguard
						has_fleet_flag = 3rd_strike_fleet
						has_fleet_flag = kurecks_support_fleet
					}
				}
			}
			random_country = {
				limit = { has_country_flag = blood_pack }
				if = {
					limit = {
						fromfrom = { has_fleet_flag = broods_vanguard }
					}
					country_event = { id = btr_mercenary.15 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
				if = {
					limit = {
						fromfrom = { has_fleet_flag = 3rd_strike_fleet }
					}
					country_event = { id = btr_mercenary.16 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
				if = {
					limit = {
						fromfrom = { has_fleet_flag = kurecks_support_fleet }
					}
					country_event = { id = btr_mercenary.17 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
			}
		}
		# Blue Suns
		if = {
			limit = {
				fromfrom = {
					OR = {
						has_fleet_flag = 2nd_blue_suns_fleet
				        has_fleet_flag = 4th_blue_suns_fleet
				        has_fleet_flag = 9th_auxiliary_blue_suns_fleet
					}
				}
			}
			random_country = {
				limit = { has_country_flag = blue_suns }
				if = {
					limit = {
						fromfrom = { has_fleet_flag = 2nd_blue_suns_fleet }
					}
					country_event = { id = btr_mercenary.15 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
				if = {
					limit = {
						fromfrom = { has_fleet_flag = 4th_blue_suns_fleet }
					}
					country_event = { id = btr_mercenary.16 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
				if = {
					limit = {
						fromfrom = { has_fleet_flag = 9th_auxiliary_blue_suns_fleet }
					}
					country_event = { id = btr_mercenary.17 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
			}
		}
		# Cat6
		if = {
			limit = {
				fromfrom = {
					OR = {
						has_fleet_flag = razor_fleet
				        has_fleet_flag = sword_command
				        has_fleet_flag = dagger_squadron
					}
				}
			}
			random_country = {
				limit = { has_country_flag = cat6 }
				if = {
					limit = {
						fromfrom = { has_fleet_flag = razor_fleet }
					}
					country_event = { id = btr_mercenary.15 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
				if = {
					limit = {
						fromfrom = { has_fleet_flag = sword_command }
					}
					country_event = { id = btr_mercenary.16 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
				if = {
					limit = {
						fromfrom = { has_fleet_flag = dagger_squadron }
					}
					country_event = { id = btr_mercenary.17 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
			}
		}
		# Eclipse
		if = {
			limit = {
				fromfrom = {
					OR = {
						has_fleet_flag = basilisk_guard
				        has_fleet_flag = supernova_renegades
				        has_fleet_flag = pulsar_fleet
					}
				}
			}
			random_country = {
				limit = { has_country_flag = eclipse }
				if = {
					limit = {
						fromfrom = { has_fleet_flag = basilisk_guard }
					}
					country_event = { id = btr_mercenary.15 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
				if = {
					limit = {
						fromfrom = { has_fleet_flag = supernova_renegades }
					}
					country_event = { id = btr_mercenary.16 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
				if = {
					limit = {
						fromfrom = { has_fleet_flag = pulsar_fleet }
					}
					country_event = { id = btr_mercenary.17 days = 300 random = 100 } # Cooldown before the fleet is rebuilt
					break = yes
				}
			}
		}
	}
}

# Mercenary Fleet Available Again 1
country_event = {
	id = btr_mercenary.15
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		remove_country_flag = merc_fleet_1_hired
	}
}

# Mercenary Fleet Available Again 2
country_event = {
	id = btr_mercenary.16
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		remove_country_flag = merc_fleet_2_hired
	}
}

# Mercenary Fleet Available Again 3
country_event = {
	id = btr_mercenary.17
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		remove_country_flag = merc_fleet_3_hired
	}
}

# Mercenary Admiral Dies (HIDDEN)
country_event = {
	id = btr_mercenary.18
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		from = {
			has_leader_flag = mercenary_merc_leader
			leader_class = admiral
		}
	}

	immediate = {
		from = {
			species = { save_event_target_as = mercenary_species }
			fleet = { fleet_event = { id = btr_mercenary.19 days = 5 } } # Delay to keep event from firing when fleet is destroyed
		}
	}
}

# Mercenary Admiral Dies
fleet_event = {
	id = btr_mercenary.19
	title = btr_mercenary.19.name
	desc = btr_mercenary.19.desc
	picture = GFX_evt_space_funeral
	show_sound = event_radio_chatter
	location = this

	is_triggered_only = yes

	immediate = {
		from = {
			create_merc_admiral = yes
			last_created_leader = {
				save_event_target_as = new_leader
			}
		}
		assign_leader = last_created_leader
	}

	option = {
		name = GOOD
	}
}

# Mercenaries Leave (Home Systems Destroyed)
country_event = {
	id = btr_mercenary.20
	title = btr_mercenary.20.name
	desc = btr_mercenary.20.desc
	picture = btr_GFX_evt_blue_suns_fleet
	show_sound = event_radio_chatter
	location = this

	is_triggered_only = yes

	immediate = {
		# Blood Pack
		if = {
			limit = {
				from = { has_country_flag = blood_pack }
			}
			every_owned_fleet = {
				limit = {
					OR = {
						has_fleet_flag = broods_vanguard
						has_fleet_flag = 3rd_strike_fleet
						has_fleet_flag = kurecks_support_fleet
					}
				}
				leader = {
					remove_leader_flag = mercenary_merc_leader
					kill_leader = { show_notification = no }
				}
				delete_fleet = this
			}
			break = yes
		}
		# Blue Suns
		if = {
			limit = {
				from = { has_country_flag = blue_suns }
			}
			every_owned_fleet = {
				limit = {
					OR = {
						has_fleet_flag = 2nd_blue_suns_fleet
				        has_fleet_flag = 4th_blue_suns_fleet
				        has_fleet_flag = 9th_auxiliary_blue_suns_fleet
					}
				}
				leader = {
					remove_leader_flag = mercenary_merc_leader
					kill_leader = { show_notification = no }
				}
				delete_fleet = this
			}
			break = yes
		}
		# Cat6
		if = {
			limit = {
				from = { has_country_flag = cat6 }
			}
			every_owned_fleet = {
				limit = {
					OR = {
						has_fleet_flag = razor_fleet
				        has_fleet_flag = sword_command
				        has_fleet_flag = dagger_squadron
					}
				}
				leader = {
					remove_leader_flag = mercenary_merc_leader
					kill_leader = { show_notification = no }
				}
				delete_fleet = this
			}
		}
		# Eclipse
		if = {
			limit = {
				from = { has_country_flag = eclipse }
			}
			every_owned_fleet = {
				limit = {
					OR = {
						has_fleet_flag = basilisk_guard
				        has_fleet_flag = supernova_renegades
				        has_fleet_flag = pulsar_fleet
					}
				}
				leader = {
					remove_leader_flag = mercenary_merc_leader
					kill_leader = { show_notification = no }
				}
				delete_fleet = this
			}
		}
	}

	option = {
		name = btr_mercenary.20.a
	}
}

# Mercenaries Available for Hire
event = {
	id = btr_mercenary.2000
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		mid_game_years_passed >= 0
		any_country = {
			is_country_type = mercenary
			OR = {
				AND = {
					has_country_flag = blood_pack
					NOT = { has_country_flag = mercenaries_available_1 }
				}
				AND = {
					has_country_flag = blue_suns
					NOT = { has_country_flag = mercenaries_available_2 }
				}
				AND = {
					has_country_flag = cat6
					NOT = { has_country_flag = mercenaries_available_3 }
				}
				AND = {
					has_country_flag = eclipse
					NOT = { has_country_flag = mercenaries_available_4 }
				}
			}
			any_owned_ship = { is_ship_size = marauder_void_dwelling }
		}
	}

	immediate = {
		random_list = {
			30 = {
				if = {
					limit = {
						any_country = {
							is_country_type = mercenary
							has_country_flag = blood_pack
							NOT = { has_country_flag = mercenaries_available_1 }
							any_owned_ship = { is_ship_size = marauder_void_dwelling }
						}
					}
					random_country = {
						limit = {
							is_country_type = mercenary
							has_country_flag = blood_pack
							NOT = { has_country_flag = mercenaries_available_1 }
							any_owned_ship = { is_ship_size = marauder_void_dwelling }
						}
						set_country_flag = mercenaries_available_1
						save_event_target_as = marauder_mercenary_country
					}
					observer_event = { id = btr_observer.1 }
					every_country = {
						limit = {
							is_ai = no
							has_communications = event_target:marauder_mercenary_country
						}
						country_event = { id = btr_mercenary.21 }
					}
				}
			} 
			30 = {
				if = {
					limit = {
						any_country = {
							is_country_type = mercenary
							has_country_flag = blue_suns
							NOT = { has_country_flag = mercenaries_available_2 }
							any_owned_ship = { is_ship_size = marauder_void_dwelling }
						}
					}
					random_country = {
						limit = {
							is_country_type = mercenary
							has_country_flag = blue_suns
							NOT = { has_country_flag = mercenaries_available_2 }
							any_owned_ship = { is_ship_size = marauder_void_dwelling }
						}
						set_country_flag = mercenaries_available_2
						save_event_target_as = marauder_mercenary_country
					}
					observer_event = { id = btr_observer.2 }
					every_country = {
						limit = {
							is_ai = no
							has_communications = event_target:marauder_mercenary_country
						}
						country_event = { id = btr_mercenary.22 }
					}
				}
			}
			30 = {
				if = {
					limit = {
						any_country = {
							is_country_type = mercenary
							has_country_flag = cat6
							NOT = { has_country_flag = mercenaries_available_3 }
							any_owned_ship = { is_ship_size = marauder_void_dwelling }
						}
					}
					random_country = {
						limit = {
							is_country_type = mercenary
							has_country_flag = cat6
							NOT = { has_country_flag = mercenaries_available_3 }
							any_owned_ship = { is_ship_size = marauder_void_dwelling }
						}
						set_country_flag = mercenaries_available_3
						save_event_target_as = marauder_mercenary_country
					}
					observer_event = { id = btr_observer.3 }
					every_country = {
						limit = {
							is_ai = no
							has_communications = event_target:marauder_mercenary_country
						}
						country_event = { id = btr_mercenary.23 }
					}
				}
			}
			30 = {
				if = {
					limit = {
						any_country = {
							is_country_type = mercenary
							has_country_flag = eclipse
							NOT = { has_country_flag = mercenaries_available_4 }
							any_owned_ship = { is_ship_size = marauder_void_dwelling }
						}
					}
					random_country = {
						limit = {
							is_country_type = mercenary
							has_country_flag = eclipse
							NOT = { has_country_flag = mercenaries_available_4 }
							any_owned_ship = { is_ship_size = marauder_void_dwelling }
						}
						set_country_flag = mercenaries_available_4
						save_event_target_as = marauder_mercenary_country
					}
					observer_event = { id = btr_observer.4 }
					every_country = {
						limit = {
							is_ai = no
							has_communications = event_target:marauder_mercenary_country
						}
						country_event = { id = btr_mercenary.24 }
					}
				}
			}
			80 = {
			}
		}
	}
}

# Blood Pack Mercenaries Available - here!
country_event = {
	id = btr_mercenary.21
	title = btr_mercenary.3.name
	desc = btr_mercenary.21.desc

	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}

	is_triggered_only = yes
	force_open = yes
	diplomatic = yes

	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
		random_country = {
			limit = {
				is_country_type = mercenary
				has_country_flag = blood_pack
			}
			save_event_target_as = encountered_mercenary
		}
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}

	option = {
		name = btr_mercenary.21.a
	}
}

# Blue Suns Mercenaries Available
country_event = {
	id = btr_mercenary.22
	title = btr_mercenary.3.name
	desc = btr_mercenary.22.desc

	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}

	is_triggered_only = yes
	force_open = yes
	diplomatic = yes

	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
		random_country = {
			limit = {
				is_country_type = mercenary
				has_country_flag = blue_suns
			}
			save_event_target_as = encountered_mercenary
		}
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}

	option = {
		name = btr_mercenary.21.a
	}
}

# cat6 Mercenaries Available
country_event = {
	id = btr_mercenary.23
	title = btr_mercenary.3.name
	desc = btr_mercenary.23.desc

	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}

	is_triggered_only = yes
	force_open = yes
	diplomatic = yes

	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
		random_country = {
			limit = {
				is_country_type = mercenary
				has_country_flag = cat6
			}
			save_event_target_as = encountered_mercenary
		}
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}

	option = {
		name = btr_mercenary.21.a
	}
}

# Eclipse Mercenaries Available
country_event = {
	id = btr_mercenary.24
	title = btr_mercenary.3.name
	desc = btr_mercenary.24.desc

	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}

	is_triggered_only = yes
	force_open = yes
	diplomatic = yes

	immediate = {
		set_country_flag = mercenary_diplomacy_engaged
		random_country = {
			limit = {
				is_country_type = mercenary
				has_country_flag = eclipse
			}
			save_event_target_as = encountered_mercenary
		}
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}

	option = {
		name = btr_mercenary.21.a
	}
}

# Mercenary Raid
event = {
	id = btr_mercenary.25
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		years_passed >= 25
		any_country = {
			is_country_type = default
			NOT = { has_country_flag = under_mercenary_attack }
			any_relation = {
				AND = {
					is_country_type = mercenary
					has_communications = prev
					NOR = {
						has_country_flag = raid_ongoing
						has_country_flag = raid_cooldown
					}
				}
			}
		}
	}

	immediate = {
		random_list = {
			30 = {
				random_country = {
					limit = {
						is_country_type = default
						NOT = { has_country_flag = under_mercenary_attack }
						any_relation = {
							AND = {
								is_country_type = mercenary
								has_communications = prev
								NOR = {
									has_country_flag = raid_ongoing
									has_country_flag = raid_cooldown
								}
							}
						}
					}
					random_relation = {
						limit = {
							is_country_type = mercenary
							has_communications = prev
							NOR = {
								has_country_flag = raid_ongoing
								has_country_flag = raid_cooldown
							}
						}
						save_event_target_as = raiding_mercenary
						species = { save_event_target_as = mercenary_species }
					}
					country_event = { id = btr_mercenary.26 days = 1 random = 10 }
				}
			}
			60 = {}
		}
	}
}

# Mercenary Raid Announced
country_event = {
	id = btr_mercenary.26
	title = btr_mercenary.4000.name
	desc = {
		text = btr_mercenary.26.1.desc
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.26.2.desc
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.26.3.desc
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = cat6 }
		}
	}
	desc = {
		text = btr_mercenary.26.4.desc
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = eclipse }
		}
	}

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:current_mercenary_diplomacy
		room = mercenary_room
	}

	is_triggered_only = yes

	trigger = {
		event_target:raiding_mercenary= {
			exists = this
			is_country_type = mercenary
			any_relation = { is_same_value = root }
			NOT = {
				any_owned_fleet = { has_fleet_flag = raiding_fleet }
			}
		}
		NOT = { has_country_flag = recently_raided_or_threatened }
	}

	immediate = {
		# Determine tribute level
		if = {
			limit = {
				has_monthly_income = { resource = minerals value <= 50 }
			}
			set_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
		}
		if = {
			limit = {
				has_monthly_income = { resource = minerals value >= 50 }
				has_monthly_income = { resource = minerals value <= 100 }
			}
			set_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
		}
		if = {
			limit = {
				has_monthly_income = { resource = minerals value > 100 }
				has_monthly_income = { resource = minerals value <= 150 }
			}
			set_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
		}
		if = {
			limit = {
				has_monthly_income = { resource = minerals value > 150 }
				has_monthly_income = { resource = minerals value <= 200 }
			}
			set_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
		}
		if = {
			limit = {
				has_monthly_income = { resource = minerals value > 200 }
				has_monthly_income = { resource = minerals value <= 250 }
			}
			set_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
		}
		if = {
			limit = {
				has_monthly_income = { resource = minerals value > 250 }
			}
			set_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
		}

		set_timed_country_flag = {
			flag = recently_raided_or_threatened
			days = 1800 # 5 years
		}
		set_country_flag = raid_target_of@event_target:raiding_mercenary
		set_country_flag = under_mercenary_attack
		if = {
			limit = {
				event_target:raiding_mercenary = { has_country_flag = blood_pack }
			}
			random_system = {
				limit = { has_star_flag = btr_blood_pack_system }
				save_event_target_as = mercenary_system
				random_system_planet = {
					limit = { has_planet_flag = raid_source }
					save_event_target_as = raid_source
				}
			}
		}
		if = {
			limit = {
				event_target:raiding_mercenary = { has_country_flag = blue_suns }
			}
			random_system = {
				limit = { has_star_flag = btr_blue_suns_system }
				save_event_target_as = mercenary_system
				random_system_planet = {
					limit = { has_planet_flag = raid_source }
					save_event_target_as = raid_source
				}
			}
		}
		if = {
			limit = {
				event_target:raiding_mercenary = { has_country_flag = cat6 }
			}
			random_system = {
				limit = { has_star_flag = btr_cat6_system }
				save_event_target_as = mercenary_system
				random_system_planet = {
					limit = { has_planet_flag = raid_source }
					save_event_target_as = raid_source
				}
			}
		}
		if = {
			limit = {
				event_target:raiding_mercenary = { has_country_flag = eclipse }
			}
			random_system = {
				limit = { has_star_flag = btr_eclipse_system }
				save_event_target_as = mercenary_system
				random_system_planet = {
					limit = { has_planet_flag = raid_source }
					save_event_target_as = raid_source
				}
			}
		}
		set_relation_flag = {
			who = event_target:raiding_mercenary
			flag = current_target
		}
		save_event_target_as = mercenary_target
		event_target:raiding_mercenary = {
			set_country_flag = raid_ongoing
			owner_species = { save_event_target_as = mercenary_species }
		}
		create_country = {
			name = event_target:raiding_mercenary
			type = "marauder_raiders"
			species = event_target:mercenary_species
			flag = event_target:raiding_mercenary
			effect = {
				save_event_target_as = mercenary_raiding_country
				if = {
					limit = { event_target:raiding_mercenary = { has_country_flag = blood_pack } }
					set_country_flag = blood_pack
				}
				if = {
					limit = { event_target:raiding_mercenary = { has_country_flag = blue_suns } }
					set_country_flag = blue_suns
				}
				if = {
					limit = { event_target:raiding_mercenary = { has_country_flag = cat6 } }
					set_country_flag = cat6
				}
				if = {
					limit = { event_target:raiding_mercenary = { has_country_flag = eclipse } }
					set_country_flag = eclipse
				}
				set_country_flag = raid_ongoing
			}
		}
		event_target:mercenary_raiding_country = {
			every_country = { establish_communications_no_message = event_target:mercenary_raiding_country }
			event_target:raiding_mercenary = {
				set_country_flag = parent_of@event_target:mercenary_raiding_country
				set_faction_hostility = {
					target = event_target:mercenary_raiding_country
					set_hostile = no
					set_neutral = no
					set_friendly = yes
				}
			}
			create_leader = {
				class = admiral
				species = event_target:mercenary_species
				name = random
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = {
					trait = random_trait
					trait = leader_trait_mercenary_warrior
				}
			}
			create_fleet = {
				name = "NAME_Raiding_Fleet"
				effect = {
					set_owner = event_target:raiding_mercenary # For ship names
					create_mercenary_raiders = yes
					set_location = event_target:raid_source
					set_fleet_stance = aggressive
					set_fleet_bombardment_stance = indiscriminate
					set_aggro_range_measure_from = self
					set_aggro_range = 150
					set_fleet_flag = raiding_fleet
					set_owner = event_target:mercenary_raiding_country # Real owner
					assign_leader = last_created_leader

					closest_system = {
						limit = {
							any_system_planet = {
								exists = owner
								owner = { is_same_value = root }
								num_pops > 0
							}
						}
						save_event_target_as = raid_system
					}
					event_target:raid_system = {
						random_system_planet = {
							limit = {
								exists = owner
								owner = { is_same_value = root }
								num_pops > 0
							}
							save_event_target_as = raid_planet
						}
					}
					auto_move_to_planet = {
						target = event_target:raid_planet
						clear_auto_move_on_arrival = no
					}
				}
			}
			set_faction_hostility = {
				target = event_target:mercenary_target
				set_hostile = yes
				set_neutral = no
				set_friendly = no
			}
		}
	}

	### Blood Pack
	option = { # Offer Energy tribute
		name = btr_mercenary.26.a
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = blood_pack }
		}
		response_text = btr_mercenary.26.1.a.response
		allow = {
			determine_energy_tribute = yes
		}
		tribute_cost_energy = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			event_target:raiding_mercenary = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Offer Mineral tribute
		name = btr_mercenary.26.b
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = blood_pack }
		}
		response_text = btr_mercenary.26.1.a.response
		allow = {
			determine_mineral_tribute = yes
		}
		tribute_cost_minerals = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			event_target:raiding_mercenary = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Refuse
		name = btr_mercenary.26.d
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = blood_pack }
		}
		response_text = btr_mercenary.26.1.b.response
		default_hide_option = yes
	}
	### Blue Suns
	option = { # Offer Energy tribute
		name = btr_mercenary.26.a
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = blue_suns }
		}
		response_text = btr_mercenary.26.2.a.response
		allow = {
			determine_energy_tribute = yes
		}
		tribute_cost_energy = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			event_target:raiding_mercenary = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Offer Mineral tribute
		name = btr_mercenary.26.b
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = blue_suns }
		}
		response_text = btr_mercenary.26.2.a.response
		allow = {
			determine_mineral_tribute = yes
		}
		tribute_cost_minerals = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			event_target:raiding_mercenary = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Refuse
		name = btr_mercenary.26.d
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = blue_suns }
		}
		response_text = btr_mercenary.26.2.b.response
		default_hide_option = yes
	}

	### Cat6
	option = { # Offer Energy tribute
		name = btr_mercenary.26.a
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = cat6 }
		}
		response_text = btr_mercenary.26.3.a.response
		allow = {
			determine_energy_tribute = yes
		}
		tribute_cost_energy = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			event_target:raiding_mercenary = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Offer Mineral tribute
		name = btr_mercenary.26.b
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = cat6 }
		}
		response_text = btr_mercenary.26.3.a.response
		allow = {
			determine_mineral_tribute = yes
		}
		tribute_cost_minerals = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			event_target:raiding_mercenary = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Refuse
		name = btr_mercenary.26.d
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = cat6 }
		}
		response_text = btr_mercenary.26.3.b.response
		default_hide_option = yes
	}
	### Eclipse
	option = { # Offer Energy tribute
		name = btr_mercenary.26.a
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = eclipse }
		}
		response_text = btr_mercenary.26.4.a.response
		allow = {
			determine_energy_tribute = yes
		}
		tribute_cost_energy = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			event_target:raiding_mercenary = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Offer Mineral tribute
		name = btr_mercenary.26.b
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = eclipse }
		}
		response_text = btr_mercenary.26.4.a.response
		allow = {
			determine_mineral_tribute = yes
		}
		tribute_cost_minerals = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			event_target:raiding_mercenary = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Refuse
		name = btr_mercenary.26.d
		trigger = {
			event_target:raiding_mercenary = { has_country_flag = eclipse }
		}
		response_text = btr_mercenary.26.4.b.response
		default_hide_option = yes
	}
}

# Mercenary Diplomacy while target of raid
country_event = {
	id = btr_mercenary.27
	title = btr_mercenary.5000.name
	desc = {
		text = btr_mercenary.27.1.desc
		trigger = {
			from = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.27.2.desc
		trigger = {
			from = { has_country_flag = blue_suns }
		}
	}
	desc = {
		text = btr_mercenary.27.3.desc
		trigger = {
			from = { has_country_flag = cat6 }
		}
	}
	desc = {
		text = btr_mercenary.27.4.desc
		trigger = {
			from = { has_country_flag = eclipse }
		}
	}

	diplomatic = yes

	picture_event_data = {
		portrait = from
		room = mercenary_room
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			AND = {
				has_relation_flag = {
					who = from
					flag = current_target
				}
				from = { is_country_type = mercenary }
			}
			AND = {
				from = { is_country_type = marauder_raiders }
				any_country = {
					is_country_type = mercenary
					has_country_flag = parent_of@from
					root = {
						has_relation_flag = {
							who = prev
							flag = current_target
						}
					}

				}
			}
		}
		NOT = { has_country_flag = mercenary_diplomacy_engaged }
	}

	immediate = {
		from = {
			owner_species = { save_event_target_as = mercenary_species }
		}
		set_country_flag = mercenary_diplomacy_engaged
		if = {
			limit = {
				from = { is_country_type = marauder_raiders }
			}
			random_country = {
				limit = {
					is_country_type = mercenary
					has_country_flag = parent_of@from
				}
				save_event_target_as = mercenary_country
			}
			from = { save_event_target_as = mercenary_raiding_country }
		}
		else = {
			from = { save_event_target_as = mercenary_country }
			random_country = {
				limit = {
					is_country_type = marauder_raiders
					from = { has_country_flag = parent_of@prev }
				}
				save_event_target_as = mercenary_raiding_country
			}
		}
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}

	# Blood Pack
	option = { # Offer Energy tribute
		name = btr_mercenary.26.a
		response_text = btr_mercenary.26.1.a.response
		trigger = {
			from = { has_country_flag = blood_pack }
		}
		allow = {
			determine_energy_tribute_raided = yes
		}
		tribute_cost_energy_raided = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:mercenary_country
			remove_country_flag = under_mercenary_attack
			#remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
			remove_relation_flag = {
				who = event_target:mercenary_country
				flag = current_target
			}
			event_target:mercenary_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Offer Mineral tribute
		name = btr_mercenary.26.b
		response_text = btr_mercenary.26.1.a.response
		trigger = {
			from = { has_country_flag = blood_pack }
		}
		allow = {
			determine_mineral_tribute_raided = yes
		}
		tribute_cost_minerals_raided = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:mercenary_country
			remove_country_flag = under_mercenary_attack
			#remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
			remove_relation_flag = {
				who = event_target:mercenary_country
				flag = current_target
			}
			event_target:mercenary_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}

	# Blue Suns
	option = { # Offer Energy tribute
		name = btr_mercenary.26.a
		response_text = btr_mercenary.26.2.a.response
		trigger = {
			from = { has_country_flag = blue_suns }
		}
		allow = {
			determine_energy_tribute_raided = yes
		}
		tribute_cost_energy_raided = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:mercenary_country
			remove_country_flag = under_mercenary_attack
			#remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
			remove_relation_flag = {
				who = event_target:mercenary_country
				flag = current_target
			}
			event_target:mercenary_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Offer Mineral tribute
		name = btr_mercenary.26.b
		response_text = btr_mercenary.26.2.a.response
		trigger = {
			from = { has_country_flag = blue_suns }
		}
		allow = {
			determine_mineral_tribute_raided = yes
		}
		tribute_cost_minerals_raided = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:mercenary_country
			remove_country_flag = under_mercenary_attack
			#remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
			remove_relation_flag = {
				who = event_target:mercenary_country
				flag = current_target
			}
			event_target:mercenary_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}

	# Cat6
	option = { # Offer Energy tribute
		name = btr_mercenary.26.a
		response_text = btr_mercenary.26.3.a.response
		trigger = {
			from = { has_country_flag = cat6 }
		}
		allow = {
			determine_energy_tribute_raided = yes
		}
		tribute_cost_energy_raided = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:mercenary_country
			remove_country_flag = under_mercenary_attack
			#remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
			remove_relation_flag = {
				who = event_target:mercenary_country
				flag = current_target
			}
			event_target:mercenary_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Offer Mineral tribute
		name = btr_mercenary.26.b
		response_text = btr_mercenary.26.3.a.response
		trigger = {
			from = { has_country_flag = cat6 }
		}
		allow = {
			determine_mineral_tribute_raided = yes
		}
		tribute_cost_minerals_raided = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:mercenary_country
			remove_country_flag = under_mercenary_attack
			#remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
			remove_relation_flag = {
				who = event_target:mercenary_country
				flag = current_target
			}
			event_target:mercenary_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}

	# Eclipse
	option = { # Offer Energy tribute
		name = btr_mercenary.26.a
		response_text = btr_mercenary.26.3.a.response
		trigger = {
			from = { has_country_flag = eclipse }
		}
		allow = {
			determine_energy_tribute_raided = yes
		}
		tribute_cost_energy_raided = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:mercenary_country
			remove_country_flag = under_mercenary_attack
			#remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
			remove_relation_flag = {
				who = event_target:mercenary_country
				flag = current_target
			}
			event_target:mercenary_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}
	option = { # Offer Mineral tribute
		name = btr_mercenary.26.b
		response_text = btr_mercenary.26.3.a.response
		trigger = {
			from = { has_country_flag = eclipse }
		}
		allow = {
			determine_mineral_tribute_raided = yes
		}
		tribute_cost_minerals_raided = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:mercenary_country
			remove_country_flag = under_mercenary_attack
			#remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
			#remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
			remove_relation_flag = {
				who = event_target:mercenary_country
				flag = current_target
			}
			event_target:mercenary_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:mercenary_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
	}

	option = { # Refuse
		name = btr_mercenary.27.e
		default_hide_option = yes
	}
}

# Raiders Hit Planet (HIDDEN)
planet_event = {
	id = btr_mercenary.28
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		planet_devastation >= 15
		from = { is_country_type = marauder_raiders }
		owner = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
				is_country_type = fallen_empire
			}
		}
		NOT = { has_planet_flag = planet_raided }
	}

	immediate = {
		owner = { save_event_target_as = raid_victim }
		random_country = {
			limit = {
				is_country_type = mercenary
				has_country_flag = parent_of@from
			}
			save_event_target_as = mercenary_country
		}
		set_timed_planet_flag = {
			flag = planet_raided
			days = 600
		}
		from = {
			random_owned_fleet = {
				limit = { has_fleet_flag = raiding_fleet }
 				fleet_event = { id = btr_mercenary.30 days = 20 }
			}
		}
		planet_event = {
			id = btr_mercenary.29
		}
	}
}

# Raiders Hit Planet
planet_event = {
	id = btr_mercenary.29
	title = btr_mercenary.29.name
	desc = {
		text = btr_mercenary.29.1.desc
		trigger = {
			owner = {
				NOR = {
					has_country_flag = geth_consensus
			        has_country_flag = rachni_hive
			        has_country_flag = collectors
				}
			}
		}
	}
	desc = {
		text = btr_mercenary.29.2.desc
		trigger = {
			owner = {
				OR = {
			        has_country_flag = rachni_hive
			        has_country_flag = collectors
				}
			}
		}
	}
	desc = {
		text = btr_mercenary.29.3.desc
		trigger = {
			owner = {
				OR = {
					has_country_flag = geth_consensus
				}
			}
		}
	}
	picture = GFX_evt_burning_settlement
	show_sound = event_planetary_riot
	location = root

	is_triggered_only = yes

	option = {
		name = btr_mercenary.29.a
		trigger = {
			owner = {
				NOR = {
					has_country_flag = geth_consensus
			        has_country_flag = rachni_hive
			        has_country_flag = collectors
				}
			}
		}
		owner = {
			if = {
				limit = { has_country_flag = mercenary_tribute_1@event_target:mercenary_country }
				add_resource = {
					energy = -200
					minerals = -200
					food = -50
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_2@event_target:mercenary_country }
				add_resource = {
					energy = -300
					minerals = -300
					food = -100
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_3@event_target:mercenary_country }
				add_resource = {
					energy = -500
					minerals = -500
					food = -150
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_4@event_target:mercenary_country }
				add_resource = {
					energy = -700
					minerals = -700
					food = -200
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_5@event_target:mercenary_country }
				add_resource = {
					energy = -900
					minerals = -900
					food = -250
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_6@event_target:mercenary_country }
				add_resource = {
					energy = -1100
					minerals = -1100
					food = -300
				}
			}
		}
	}
	option = {
		name = btr_mercenary.29.b
		trigger = {
			owner = {
				OR = {
			        has_country_flag = rachni_hive
			        has_country_flag = collectors
				}
			}
		}
		owner = {
			if = {
				limit = { has_country_flag = mercenary_tribute_1@event_target:mercenary_country }
				add_resource = {
					energy = -200
					minerals = -200
					food = -50
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_2@event_target:mercenary_country }
				add_resource = {
					energy = -300
					minerals = -300
					food = -100
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_3@event_target:mercenary_country }
				add_resource = {
					energy = -500
					minerals = -500
					food = -150
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_4@event_target:mercenary_country }
				add_resource = {
					energy = -700
					minerals = -700
					food = -200
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_5@event_target:mercenary_country }
				add_resource = {
					energy = -900
					minerals = -900
					food = -250
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_6@event_target:mercenary_country }
				add_resource = {
					energy = -1100
					minerals = -1100
					food = -300
				}
			}
		}
	}
	option = {
		name = btr_mercenary.29.c
		trigger = {
			owner = {
				has_country_flag = geth_consensus
			}
		}
		owner = {
			if = {
				limit = { has_country_flag = mercenary_tribute_1@event_target:mercenary_country }
				add_resource = {
					energy = -200
					minerals = -200
					food = -50
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_2@event_target:mercenary_country }
				add_resource = {
					energy = -300
					minerals = -300
					food = -100
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_3@event_target:mercenary_country }
				add_resource = {
					energy = -500
					minerals = -500
					food = -150
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_4@event_target:mercenary_country }
				add_resource = {
					energy = -700
					minerals = -700
					food = -200
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_5@event_target:mercenary_country }
				add_resource = {
					energy = -900
					minerals = -900
					food = -250
				}
			}
			else_if = {
				limit = { has_country_flag = mercenary_tribute_6@event_target:mercenary_country }
				add_resource = {
					energy = -1100
					minerals = -1100
					food = -300
				}
			}
		}
	}
}

# Raiders Withdraw (HIDDEN)
fleet_event = {
	id = btr_mercenary.30
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		set_fleet_flag = raid_accomplished
		owner = {
			save_event_target_as = raiding_mercenary
			if = {
				limit = { has_country_flag = blood_pack }
				random_system = {
					limit = { has_star_flag = btr_blood_pack_system }
					solar_system = { save_event_target_as = mercenary_system }
					random_system_planet = {
						limit = { has_planet_flag = raid_source }
						save_event_target_as = raid_source
					}
				}
			}
			if = {
				limit = { has_country_flag = blue_suns }
				random_system = {
					limit = { has_star_flag = btr_blue_suns_system }
					solar_system = { save_event_target_as = mercenary_system }
					random_system_planet = {
						limit = { has_planet_flag = raid_source }
						save_event_target_as = raid_source
					}
				}
			}
			if = {
				limit = { has_country_flag = cat6 }
				random_system = {
					limit = { has_star_flag = btr_cat6_system }
					solar_system = { save_event_target_as = mercenary_system }
					random_system_planet = {
						limit = { has_planet_flag = raid_source }
						save_event_target_as = raid_source
					}
				}
			}
			if = {
				limit = { has_country_flag = eclipse }
				random_system = {
					limit = { has_star_flag = btr_eclipse_system }
					solar_system = { save_event_target_as = mercenary_system }
					random_system_planet = {
						limit = { has_planet_flag = raid_source }
						save_event_target_as = raid_source
					}
				}
			}
		}
		solar_system = { save_event_target_as = fleet_system }
		clear_fleet_actions = this
		auto_move_to_planet = {
			target = event_target:raid_source
			destroy_on_arrival = yes
			clear_auto_move_on_arrival = yes
		}
		fleet_event = { id = btr_mercenary.200 days = 360 } # Kill fleet after 1 year regardless
		random_country = {
			limit = {
				is_country_type = mercenary
				has_country_flag = parent_of@root.owner
			}
			save_event_target_as = raid_parent
			remove_country_flag = raid_ongoing
			set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
		}
		owner = { remove_country_flag = raid_ongoing }
		event_target:raid_victim = {
			country_event = { id = btr_mercenary.31 }
			remove_country_flag = raid_target_of@event_target:raid_parent
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raid_parent
			remove_country_flag = mercenary_tribute_2@event_target:raid_parent
			remove_country_flag = mercenary_tribute_3@event_target:raid_parent
			remove_country_flag = mercenary_tribute_4@event_target:raid_parent
			remove_country_flag = mercenary_tribute_5@event_target:raid_parent
			remove_country_flag = mercenary_tribute_6@event_target:raid_parent
			remove_relation_flag = {
				who = event_target:raid_parent
				flag = current_target
			}
			remove_relation_flag = {
				who = event_target:raid_parent
				flag = current_hired_target
			}
		}
		if = {
			limit = {
				any_country = { has_country_flag = hired@event_target:raid_parent }
			}
			random_country = {
				limit = { has_country_flag = hired@event_target:raid_parent }
				country_event = { id = btr_mercenary.201 }
				remove_country_flag = hired@event_target:raid_parent
			}
		}
	}
}

# Raiders Withdraw
country_event = {
	id = btr_mercenary.31
	title = btr_mercenary.4000.name
	desc = {
		text = btr_mercenary.31.1.desc
		trigger = {
			event_target:raid_parent = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.31.2.desc
		trigger = {
			event_target:raid_parent = { has_country_flag = blue_suns }
		}
	}
	desc = {
		text = btr_mercenary.31.3.desc
		trigger = {
			event_target:raid_parent = { has_country_flag = cat6 }
		}
	}
	desc = {
		text = btr_mercenary.31.4.desc
		trigger = {
			event_target:raid_parent = { has_country_flag = eclipse }
		}
	}

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:raid_parent
		room = mercenary_room
	}

	is_triggered_only = yes

	option = {
		name = btr_mercenary.31.a
	}
}

# Mercenary Diplomacy while target of Hired raid
country_event = {
	id = btr_mercenary.32
	title = btr_mercenary.5000.name
	desc = {
		text = btr_mercenary.32.1.desc
		trigger = {
			from = { has_country_flag = blood_pack }
		}
	}
	desc = {
		text = btr_mercenary.32.2.desc
		trigger = {
			from = { has_country_flag = blue_suns }
		}
	}
	desc = {
		text = btr_mercenary.32.3.desc
		trigger = {
			from = { has_country_flag = cat6 }
		}
	}
	desc = {
		text = btr_mercenary.32.4.desc
		trigger = {
			from = { has_country_flag = eclipse }
		}
	}

	diplomatic = yes

	picture_event_data = {
		portrait = from
		room = mercenary_room
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			AND = {
				has_relation_flag = {
					who = from
					flag = current_hired_target
				}
				from = { is_country_type = mercenary }
			}
			AND = {
				from = { is_country_type = marauder_raiders }
				any_country = {
					is_country_type = mercenary
					has_country_flag = parent_of@from
					root = {
						has_relation_flag = {
							who = prev
							flag = current_hired_target
						}
					}

				}
			}
		}
		NOT = { has_country_flag = mercenary_diplomacy_engaged }
	}

	immediate = {
		from = {
			owner_species = { save_event_target_as = mercenary_species }
		}
		set_country_flag = mercenary_diplomacy_engaged
	}

	after = {
		hidden_effect = {
			remove_country_flag = mercenary_diplomacy_engaged
		}
	}

	# Blood Pack
	option = {
		name = btr_mercenary.32.a
		trigger = {
			from = {
				has_country_flag = blood_pack
				NOR = {
					has_valid_civic = "civic_fanatic_purifiers"
					has_valid_civic = "civic_hive_devouring_swarm"
					has_valid_civic = "civic_machine_terminator"
				}
			}
		}
		response_text = btr_mercenary.32.1.a.response
	}

	# Blue Suns
	option = {
		name = btr_mercenary.32.a
		trigger = {
			from = {
				has_country_flag = blue_suns
				NOR = {
					has_valid_civic = "civic_fanatic_purifiers"
					has_valid_civic = "civic_hive_devouring_swarm"
					has_valid_civic = "civic_machine_terminator"
				}
			}
		}
		response_text = btr_mercenary.32.2.a.response
	}

	# Cat6
	option = {
		name = btr_mercenary.32.a
		trigger = {
			from = {
				has_country_flag = cat6
				NOR = {
					has_valid_civic = "civic_fanatic_purifiers"
					has_valid_civic = "civic_hive_devouring_swarm"
					has_valid_civic = "civic_machine_terminator"
				}
			}
		}
		response_text = btr_mercenary.32.3.a.response
	}

	# Eclipse
	option = {
		name = btr_mercenary.32.a
		trigger = {
			from = {
				has_country_flag = eclipse
				NOR = {
					has_valid_civic = "civic_fanatic_purifiers"
					has_valid_civic = "civic_hive_devouring_swarm"
					has_valid_civic = "civic_machine_terminator"
				}
			}
		}
		response_text = btr_mercenary.32.4.a.response
	}

	option = {
		name = btr_mercenary.32.b
		default_hide_option = yes
	}
}

# Raiders Driven Off (HIDDEN)
event = {
	id = btr_mercenary.33
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		any_country = {
			is_country_type = marauder_raiders
			has_country_flag = raid_ongoing
			any_owned_fleet = {
				OR = {
					AND = {
						has_fleet_flag = mercenary_raider_fleet_1
						NOT = { has_fleet_flag = raid_accomplished }
						is_in_combat = no
						fleet_power < 1500
					}
					AND = {
						has_fleet_flag = mercenary_raider_fleet_2
						NOT = { has_fleet_flag = raid_accomplished }
						is_in_combat = no
						fleet_power < 2500
					}
					AND = {
						has_fleet_flag = mercenary_raider_fleet_3
						NOT = { has_fleet_flag = raid_accomplished }
						is_in_combat = no
						fleet_power < 3500
					}
					AND = {
						has_fleet_flag = mercenary_raider_fleet_4
						NOT = { has_fleet_flag = raid_accomplished }
						is_in_combat = no
						fleet_power < 6500
					}
				}
			}
		}
	}

	immediate = {
		random_country = {
			limit = {
				is_country_type = marauder_raiders
				has_country_flag = raid_ongoing
				any_owned_fleet = {
					OR = {
						AND = {
							has_fleet_flag = mercenary_raider_fleet_1
							is_in_combat = no
							fleet_power < 1500
						}
						AND = {
							has_fleet_flag = mercenary_raider_fleet_2
							is_in_combat = no
							fleet_power < 2500
						}
						AND = {
							has_fleet_flag = mercenary_raider_fleet_3
							is_in_combat = no
							fleet_power < 3500
						}
						AND = {
							has_fleet_flag = mercenary_raider_fleet_4
							is_in_combat = no
							fleet_power < 6500
						}
					}
				}
			}
			save_event_target_as = mercenary_raiding_country
			random_country = {
				limit = {
					has_country_flag = parent_of@event_target:mercenary_raiding_country
				}
				save_event_target_as = mercenary_country
			}
		}
		event_target:mercenary_country = {
			remove_country_flag = raid_ongoing
			set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			if = {
				limit = { has_country_flag = blood_pack }
				random_system = {
					limit = { has_star_flag = btr_blood_pack_system }
					random_system_planet = {
						limit = { has_planet_flag = raid_source }
						save_event_target_as = raid_source
					}
				}
			}
			if = {
				limit = { has_country_flag = blue_suns }
				random_system = {
					limit = { has_star_flag = btr_blue_suns_system }
					random_system_planet = {
						limit = { has_planet_flag = raid_source }
						save_event_target_as = raid_source
					}
				}
			}
			if = {
				limit = { has_country_flag = cat6 }
				random_system = {
					limit = { has_star_flag = btr_cat6_system }
					random_system_planet = {
						limit = { has_planet_flag = raid_source }
						save_event_target_as = raid_source
					}
				}
			}
			if = {
				limit = { has_country_flag = eclipse }
				random_system = {
					limit = { has_star_flag = btr_eclipse_system }
					random_system_planet = {
						limit = { has_planet_flag = raid_source }
						save_event_target_as = raid_source
					}
				}
			}
			event_target:mercenary_raiding_country = {
				remove_country_flag = raid_ongoing
				every_owned_fleet = {
					remove_auto_move_target = yes
					solar_system = { save_event_target_as = retreating_fleet_system }
					auto_move_to_planet = {
						target = event_target:raid_source
						destroy_on_arrival = yes
						clear_auto_move_on_arrival = yes
					}
					fleet_event = { id = btr_mercenary.200 days = 360 } # Kill fleet after 1 year regardless
				}
			}
			random_country = {
				limit = { has_country_flag = raid_target_of@event_target:mercenary_country }
				save_event_target_as = mercenary_target
				country_event = { id = btr_mercenary.34 }
				remove_country_flag = raid_target_of@event_target:mercenary_country
				remove_country_flag = under_mercenary_attack
				remove_country_flag = mercenary_tribute_1@event_target:mercenary_country
				remove_country_flag = mercenary_tribute_2@event_target:mercenary_country
				remove_country_flag = mercenary_tribute_3@event_target:mercenary_country
				remove_country_flag = mercenary_tribute_4@event_target:mercenary_country
				remove_country_flag = mercenary_tribute_5@event_target:mercenary_country
				remove_country_flag = mercenary_tribute_6@event_target:mercenary_country
				remove_relation_flag = {
					who = event_target:mercenary_country
					flag = current_target
				}
				remove_relation_flag = {
					who = event_target:mercenary_country
					flag = current_hired_target
				}
			}
			if = {
				limit = {
					any_country = {
						is_country_type = default
						has_country_flag = hired@event_target:mercenary_country
					}
				}
				random_country = {
					limit = { has_country_flag = hired@event_target:mercenary_country }
					country_event = { id = btr_mercenary.37 }
					remove_country_flag = hired@event_target:mercenary_country
				}
			}
		}
	}
}

# Raiders Driven Off
country_event = {
	id = btr_mercenary.34
	title = btr_mercenary.34.name
	desc = btr_mercenary.34.desc
	picture = GFX_evt_small_space_battle
	show_sound = event_radio_chatter
	location = event_target:retreating_fleet_system

	is_triggered_only = yes

	option = {
		name = btr_mercenary.34.a
	}
}

# Raider fleet destroyed (HIDDEN)
country_event = {
	id = btr_mercenary.35
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		is_country_type = marauder_raiders
		has_country_flag = raid_ongoing
		fromfrom = {
			has_fleet_flag = raiding_fleet
		}
	}

	immediate = {
		random_country = {
			limit = {
				has_country_flag = parent_of@root
			}
			save_event_target_as = raiding_mercenary
		}
		fromfrom = {
			solar_system = { save_event_target_as = destroyed_fleet_system }
		}
		random_country = {
			limit = { has_country_flag = raid_target_of@event_target:raiding_mercenary }
			country_event = { id = btr_mercenary.36 }
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_hired_target
			}
		}
		remove_country_flag = raid_ongoing
		event_target:raiding_mercenary = {
			remove_country_flag = raid_ongoing
			set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			from = { save_event_target_as = fleet_destroyer }
			if = {
				limit = {
					any_country = {
						is_country_type = default
						has_country_flag = hired@event_target:raiding_mercenary
					}
				}
				random_country = {
					limit = { has_country_flag = hired@event_target:raiding_mercenary }
					country_event = { id = btr_mercenary.50 }
					remove_country_flag = hired@event_target:raiding_mercenary
				}
			}
		}
	}
}

# Raider fleet destroyed
country_event = {
	id = btr_mercenary.36
	title = btr_mercenary.36.name
	desc = btr_mercenary.36.desc
	picture = GFX_evt_small_space_battle
	show_sound = event_radio_chatter
	location = event_target:destroyed_fleet_system

	is_triggered_only = yes

	option = {
		name = btr_mercenary.36.a
	}
}

# Raiders Driven Off (Hired Them)
country_event = {
	id = btr_mercenary.37
	title = btr_mercenary.37.name
	desc = btr_mercenary.37.name
	picture = btr_GFX_evt_blue_suns_fleet
	show_sound = event_radio_chatter
	location = event_target:retreating_fleet_system

	is_triggered_only = yes

	option = {
		name = btr_mercenary.37.a
	}
}

# Kill Raiding Fleet if it gets stuck
fleet_event = {
	id = btr_mercenary.200
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		delete_fleet = this
	}
}

# Hired Raiders Return
country_event = {
	id = btr_mercenary.201
	title = btr_mercenary.201.name
	desc = btr_mercenary.201.desc
	picture = btr_GFX_evt_blue_suns_fleet
	show_sound = event_radio_chatter
	location = event_target:fleet_system

	is_triggered_only = yes

	option = {
		name = btr_mercenary.201.a
	}
}

# Hired Raiders Destroyed
country_event = {
	id = btr_mercenary.50
	title = btr_mercenary.50.name
	desc = btr_mercenary.50.desc
	picture = GFX_evt_small_space_battle # chnage to mass effect pic
	show_sound = event_space_battle
	location = event_target:destroyed_fleet_system

	is_triggered_only = yes

	option = {
		name = btr_mercenary.50.a
	}
}

### AI STUFF ###

# AI hires Raiders
event = {
	id = btr_mercenary.300
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		years_passed >= 50
		any_country = {
			is_country_type = default
			is_ai = yes
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
				has_country_flag = geth_consensus
			    has_country_flag = rachni_hive
			    has_country_flag = collectors
			}
			any_rival_country = {
				NOR = {
					has_country_flag = under_mercenary_attack
					has_country_flag = target_of_hired_ai_raid
				}
			}
			resource_stockpile_compare = { resource = energy value >= 5000 }
			any_relation = {
				is_country_type = mercenary
				has_communications = prev
				NOR = {
					has_country_flag = raid_ongoing
					has_country_flag = raid_cooldown
				}
			}
		}
	}

	immediate = {
		# define hired_mercenaries for use in weights
		random_playable_country = {
			limit = {
				is_ai = yes
				NOR = {
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_terminator
				}
				any_rival_country = {
					NOR = {
						has_country_flag = under_mercenary_attack
						has_country_flag = target_of_hired_ai_raid
					}
				}
				resource_stockpile_compare = { resource = energy value >= 5000 }
				any_relation = {
					is_country_type = mercenary
					has_communications = prev
					NOR = {
						has_country_flag = raid_ongoing
						has_country_flag = raid_cooldown
					}
				}
			}
			save_event_target_as = hired_mercenaries
		}
		random_list = {
			3 = {
				modifier = {
					factor = 0
					event_target:hired_mercenaries = {
						OR = {
							has_ai_personality = honorbound_warriors
							has_ai_personality = xenophobic_isolationists
						}
					}
				}
				modifier = {
					factor = 0.6
					event_target:hired_mercenaries = {
						has_ai_personality = peaceful_traders
					}
				}
				# moved out of random_list
				#random_country = {
				#	limit = {
				#		is_country_type = default
				#		is_ai = yes
				#		NOR = {
				#			has_valid_civic = civic_fanatic_purifiers
				#			has_valid_civic = civic_hive_devouring_swarm
				#			has_valid_civic = civic_machine_terminator
				#		}
				#		any_relation = {
				#			prev = { is_rival = prev }
				#		}
				#		resource_stockpile_compare = { resource = energy value >= 5000 }
				#	}
				#	save_event_target_as = hired_marauders
				event_target:hired_mercenaries = {
					add_resource = { energy = @raidcost }
					random_rival_country = {
						limit = {
							NOR = {
								has_country_flag = under_mercenary_attack
								has_country_flag = target_of_hired_ai_raid
							}
						}
						save_event_target_as = mercenary_target
						set_timed_country_flag = { flag = target_of_hired_ai_raid days = 7200 }
					}
					random_relation = {
						limit = {
							is_country_type = mercenary
							NOR = {
								has_country_flag = raid_ongoing
								has_country_flag = raid_cooldown
							}
						}
						save_event_target_as = raiding_mercenary
					}
				}
				if = {
					limit = {
						event_target:raiding_mercenary = { has_country_flag = blood_pack }
					}
					random_system = {
						limit = { has_star_flag = btr_blood_pack_system }
						save_event_target_as = mercenary_system
						random_system_planet = {
							limit = { has_planet_flag = raid_source }
							save_event_target_as = raid_source
						}
					}
				}
				if = {
					limit = {
						event_target:raiding_mercenary = { has_country_flag = blue_suns }
					}
					random_system = {
						limit = { has_star_flag = btr_blue_suns_system }
						save_event_target_as = mercenary_system
						random_system_planet = {
							limit = { has_planet_flag = raid_source }
							save_event_target_as = raid_source
						}
					}
				}
				if = {
					limit = {
						event_target:raiding_mercenary = { has_country_flag = cat6 }
					}
					random_system = {
						limit = { has_star_flag = btr_cat6_system }
						save_event_target_as = mercenary_system
						random_system_planet = {
							limit = { has_planet_flag = raid_source }
							save_event_target_as = raid_source
						}
					}
				}
				if = {
					limit = {
						event_target:raiding_mercenary = { has_country_flag = eclipse }
					}
					random_system = {
						limit = { has_star_flag = btr_eclipse_system }
						save_event_target_as = mercenary_system
						random_system_planet = {
							limit = { has_planet_flag = raid_source }
							save_event_target_as = raid_source
						}
					}
				}
				event_target:raiding_mercenary = {
					set_country_flag = raid_ongoing
					owner_species = { save_event_target_as = mercenary_species }
				}
				create_country = {
					name = event_target:raiding_mercenary
					type = "marauder_raiders"
					species = event_target:mercenary_species
					flag = event_target:raiding_mercenary
					effect = {
						save_event_target_as = mercenary_raiding_country
						if = {
							limit = { event_target:raiding_mercenary = { has_country_flag = blood_pack } }
							set_country_flag = blood_pack
						}
						if = {
							limit = { event_target:raiding_mercenary = { has_country_flag = blue_suns } }
							set_country_flag = blue_suns
						}
						if = {
							limit = { event_target:raiding_mercenary = { has_country_flag = cat6 } }
							set_country_flag = cat6
						}
						if = {
							limit = { event_target:raiding_mercenary = { has_country_flag = eclipse } }
							set_country_flag = eclipse
						}
						set_country_flag = raid_ongoing
					}
				}
				event_target:mercenary_raiding_country = {
					every_country = { establish_communications_no_message = event_target:mercenary_raiding_country }
					event_target:raiding_mercenary = {
						set_country_flag = parent_of@event_target:mercenary_raiding_country
						set_faction_hostility = {
							target = event_target:mercenary_raiding_country
							set_hostile = no
							set_neutral = no
							set_friendly = yes
						}
					}
					create_leader = {
						class = admiral
						species = event_target:mercenary_species
						name = random
						skill = 3
						leader_age_min = 25
						leader_age_max = 45
						traits = {
							trait = random_trait
							trait = leader_trait_mercenary_warrior
						}
					}
					create_fleet = {
						name = "NAME_Raiding_Fleet"
						effect = {
							set_owner = event_target:raiding_mercenary # For ship names
							create_mercenary_raiders = yes
							set_location = event_target:raid_source
							set_fleet_stance = aggressive
							set_fleet_bombardment_stance = indiscriminate
							set_aggro_range_measure_from = self
							set_aggro_range = 150
							set_fleet_flag = hired_raiding_fleet
							set_fleet_flag = raiding_fleet
							set_owner = event_target:mercenary_raiding_country # Real owner
							assign_leader = last_created_leader

							closest_system = {
								limit = {
									any_system_planet = {
										exists = owner
										owner = { is_same_value = event_target:mercenary_target }
										num_pops > 0
									}
								}
								save_event_target_as = raid_system
							}
							event_target:raid_system = {
								random_system_planet = {
									limit = {
										exists = owner
										owner = { is_same_value = event_target:mercenary_target }
										num_pops > 0
									}
									save_event_target_as = raid_planet
								}
							}
							auto_move_to_planet = {
								target = event_target:raid_planet
								clear_auto_move_on_arrival = no
							}
						}
					}
					set_faction_hostility = {
						target = event_target:mercenary_target
						set_hostile = yes
						set_neutral = no
						set_friendly = no
					}
				}
				event_target:mercenary_target = {
					set_country_flag = raid_target_of@event_target:raiding_mercenary
					set_country_flag = under_mercenary_attack
					set_relation_flag = {
						who = event_target:raiding_mercenary
						flag = current_hired_target
					}
					if = {
						limit = { has_communications = event_target:raiding_mercenary }
						country_event = { id = btr_mercenary.100 days = 1 random = 30 }
					}
					else = {
						country_event = { id = btr_mercenary.101  days = 1 random = 30 }
					}
				}
			}
			110 = {}
		}
	}
}

# AI hires Mercenaries
event = {
	id = btr_mercenary.301
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		mid_game_years_passed >= -10
		any_country = {
			is_country_type = default
			is_ai = yes
			NOR = {
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_terminator
				has_country_flag = ai_hired_mercs
				has_country_flag = geth_consensus
			    has_country_flag = rachni_hive
			    has_country_flag = collectors
			}
			resource_stockpile_compare = { resource = energy value >= 6000 }
			is_at_war = yes
			any_war = {
				any_war_participant = {
					is_at_war_with = prevprev
					relative_power = {
						who = prevprev
						value >= equivalent
					}
				}
			}
			any_relation = {
				is_country_type = mercenary
				has_communications = prev
				NOR = {
					has_country_flag = raid_ongoing
					has_country_flag = raid_cooldown
				}
				OR = {
					AND = {
						has_country_flag = blood_pack
						has_country_flag = mercenaries_available_1
						NOR = {
							AND = {
								has_country_flag = merc_fleet_1_hired
								has_country_flag = merc_fleet_2_hired
								has_country_flag = merc_fleet_3_hired
							}
						}
					}
					AND = {
						has_country_flag = blue_suns
						has_country_flag = mercenaries_available_2
						NOR = {
							AND = {
								has_country_flag = merc_fleet_1_hired
								has_country_flag = merc_fleet_2_hired
								has_country_flag = merc_fleet_3_hired
							}
						}
					}
					AND = {
						has_country_flag = cat6
						has_country_flag = mercenaries_available_3
						NOR = {
							AND = {
								has_country_flag = merc_fleet_1_hired
								has_country_flag = merc_fleet_2_hired
								has_country_flag = merc_fleet_3_hired
							}
						}
					}
					AND = {
						has_country_flag = eclipse
						has_country_flag = mercenaries_available_4
						NOR = {
							AND = {
								has_country_flag = merc_fleet_1_hired
								has_country_flag = merc_fleet_2_hired
								has_country_flag = merc_fleet_3_hired
							}
						}
					}
				}
			}
		}
	}

	immediate = {
		random_country = {
			limit = {
				is_country_type = default
				is_ai = yes
				NOR = {
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_terminator
					has_country_flag = ai_hired_mercs
				}
				resource_stockpile_compare = { resource = energy value >= 6000 }
				is_at_war = yes
				any_war = {
					any_war_participant = {
						is_at_war_with = prevprev
						relative_power = {
							who = prevprev
							value >= equivalent
						}
					}
				}
				any_relation = {
					is_country_type = mercenary
					has_communications = prev
					NOR = {
						has_country_flag = raid_ongoing
						has_country_flag = raid_cooldown
					}
					OR = {
						AND = {
							has_country_flag = blood_pack
							has_country_flag = mercenaries_available_1
							NOR = {
								AND = {
									has_country_flag = merc_fleet_1_hired
									has_country_flag = merc_fleet_2_hired
									has_country_flag = merc_fleet_3_hired
								}
							}
						}
						AND = {
							has_country_flag = blue_suns
							has_country_flag = mercenaries_available_2
							NOR = {
								AND = {
									has_country_flag = merc_fleet_1_hired
									has_country_flag = merc_fleet_2_hired
									has_country_flag = merc_fleet_3_hired
								}
							}
						}
						AND = {
							has_country_flag = cat6
							has_country_flag = mercenaries_available_3
							NOR = {
								AND = {
									has_country_flag = merc_fleet_1_hired
									has_country_flag = merc_fleet_2_hired
									has_country_flag = merc_fleet_3_hired
								}
							}
						}
						AND = {
							has_country_flag = eclipse
							has_country_flag = mercenaries_available_4
							NOR = {
								AND = {
									has_country_flag = merc_fleet_1_hired
									has_country_flag = merc_fleet_2_hired
									has_country_flag = merc_fleet_3_hired
								}
							}
						}
					}
				}
			}
			save_event_target_as = mercenary_hirer
			random_relation = {
				limit = {
					is_country_type = mercenary
					has_communications = prev
					NOR = {
						has_country_flag = raid_ongoing
						has_country_flag = raid_cooldown
					}
					OR = {
						AND = {
							has_country_flag = blood_pack
							has_country_flag = mercenaries_available_1
							NOR = {
								AND = {
									has_country_flag = merc_fleet_1_hired
									has_country_flag = merc_fleet_2_hired
									has_country_flag = merc_fleet_3_hired
								}
							}
						}
						AND = {
							has_country_flag = blue_suns
							has_country_flag = mercenaries_available_2
							NOR = {
								AND = {
									has_country_flag = merc_fleet_1_hired
									has_country_flag = merc_fleet_2_hired
									has_country_flag = merc_fleet_3_hired
								}
							}
						}
						AND = {
							has_country_flag = cat6
							has_country_flag = mercenaries_available_3
							NOR = {
								AND = {
									has_country_flag = merc_fleet_1_hired
									has_country_flag = merc_fleet_2_hired
									has_country_flag = merc_fleet_3_hired
								}
							}
						}
						AND = {
							has_country_flag = eclipse
							has_country_flag = mercenaries_available_4
							NOR = {
								AND = {
									has_country_flag = merc_fleet_1_hired
									has_country_flag = merc_fleet_2_hired
									has_country_flag = merc_fleet_3_hired
								}
							}
						}
					}
				}
				save_event_target_as = mercenary_merc_country
				owner_species = { save_event_target_as = mercenary_species }
			}

			random_list = {
				# Large Fleet
				10 = {
					event_target:mercenary_merc_country = { set_country_flag = merc_fleet_1_hired }
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = blood_pack } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_broods_vanguard = yes
									set_location = event_target:mercenary_hirer.capital_scope
									assign_leader = last_created_leader
									set_fleet_flag = broods_vanguard
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "Brood's Vanguard"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = blue_suns } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_2nd_blue_suns_fleet = yes
									set_location = event_target:mercenary_hirer.capital_scope
									assign_leader = last_created_leader
									set_fleet_flag = 2nd_blue_suns_fleet
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "2nd Blue Suns Fleet"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = cat6 } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_razor_fleet = yes
									set_location = event_target:mercenary_hirer.capital_scope
									assign_leader = last_created_leader
									set_fleet_flag = razor_fleet
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "Razor Fleet"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = eclipse } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_basilisk_guard = yes
									set_location = event_target:mercenary_hirer.capital_scope
									assign_leader = last_created_leader
									set_fleet_flag = basilisk_guard
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "Basilisk Guard"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					modifier = {
						factor = 0
						event_target:mercenary_merc_country = { has_country_flag = merc_fleet_1_hired }
						event_target:mercenary_hirer = { resource_stockpile_compare = { resource = energy value < 12000 } }
					}
				}
				# Medium Fleet
				10 = {
					event_target:mercenary_merc_country = { set_country_flag = merc_fleet_2_hired }
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = blood_pack } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_3rd_strike_fleet = yes
									set_location = event_target:mercenary_hirer.capital_scope
									assign_leader = last_created_leader
									set_fleet_flag = 3rd_strike_fleet
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "3rd Strike Fleet"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = blue_suns } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_4th_blue_suns_fleet = yes
									set_location = event_target:mercenary_hirer.capital_scope
									assign_leader = last_created_leader
									set_fleet_flag = 4th_blue_suns_fleet
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "4th Blue Suns Fleet"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = cat6 } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_sword_command = yes
									set_location = event_target:mercenary_hirer.capital_scope
									assign_leader = last_created_leader
									set_fleet_flag = sword_command
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "Sword Command"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = eclipse } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_supernova_renegades = yes
									set_location = event_target:mercenary_hirer.capital_scope
									assign_leader = last_created_leader
									set_fleet_flag = supernova_renegades
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "Supernova Renegades"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					modifier = {
						factor = 0
						event_target:mercenary_merc_country = { has_country_flag = merc_fleet_2_hired }
						event_target:mercenary_hirer = { resource_stockpile_compare = { resource = energy value < 9000 } }
					}
				}
				# Small Fleet
				10 = {
					event_target:mercenary_merc_country = { set_country_flag = merc_fleet_3_hired }
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = blood_pack } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_kurecks_support_fleet = yes
									assign_leader = last_created_leader
									set_location = event_target:mercenary_hirer.capital_scope
									set_fleet_flag = kurecks_support_fleet
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "Kureck's Support Fleet"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = blue_suns } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_9th_auxiliary_blue_suns_fleet = yes
									assign_leader = last_created_leader
									set_location = event_target:mercenary_hirer.capital_scope
									set_fleet_flag = 9th_auxiliary_blue_suns_fleet
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "9th Auxiliary Blue Suns Fleet"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = cat6 } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_dagger_squadron = yes
									assign_leader = last_created_leader
									set_location = event_target:mercenary_hirer.capital_scope
									set_fleet_flag = dagger_squadron
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "Dagger Squadron"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					if = {
						limit = { event_target:mercenary_merc_country = { has_country_flag = eclipse } }
						event_target:mercenary_hirer = {
							create_merc_admiral = yes
							create_fleet = {
								effect = {
									set_owner = event_target:mercenary_hirer
									save_event_target_as = hired_merc_fleet
									create_pulsar_fleet = yes
									assign_leader = last_created_leader
									set_location = event_target:mercenary_hirer.capital_scope
									set_fleet_flag = pulsar_fleet
									fleet_event = { id = btr_mercenary.13 days = 1800 }
									set_name = "Pulsar Fleet"
								}
								settings = {
									can_upgrade = no
									can_disband = no
									can_change_composition = no
									can_change_leader = no
									uses_naval_capacity = no
								}
							}
						}
						event_target:mercenary_hirer = { set_timed_country_flag = { flag = ai_hired_mercs days = 1800 } }
					}
					modifier = {
						factor = 0
						event_target:mercenary_merc_country = { has_country_flag = merc_fleet_3_hired }
					}
				}
				100 = {}
			}
		}
	}

}

# Raiding End Failsafe
event = {
	id = btr_mercenary.302
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		any_country = {
			is_country_type = mercenary
			has_country_flag = raid_ongoing
			NOT = {
				any_country = {
					is_country_type = marauder_raiders
					prev = { has_country_flag = parent_of@prev }
				}
			}
		}
	}

	immediate = {
		random_country = {
			limit = {
				is_country_type = mercenary
				has_country_flag = raid_ongoing
				NOT = {
					any_country = {
						is_country_type = marauder_raiders
						prev = { has_country_flag = parent_of@prev }
					}
				}
			}
			save_event_target_as = raiding_mercenary
			remove_country_flag = raid_ongoing
		}
		random_playable_country = {
			limit = { has_country_flag = raid_target_of@event_target:raiding_mercenary }
			remove_country_flag = raid_target_of@event_target:raiding_mercenary
			remove_country_flag = under_mercenary_attack
			remove_country_flag = mercenary_tribute_1@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_2@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_3@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_4@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_5@event_target:raiding_mercenary
			remove_country_flag = mercenary_tribute_6@event_target:raiding_mercenary
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_target
			}
			remove_relation_flag = {
				who = event_target:raiding_mercenary
				flag = current_hired_target
			}
		}
		if = {
			limit = {
				any_playable_country = { has_country_flag = hired@event_target:raiding_mercenary }
			}
			random_playable_country = {
				limit = { has_country_flag = hired@event_target:raiding_mercenary }
				remove_country_flag = hired@event_target:raiding_mercenary
			}
		}
	}
}
